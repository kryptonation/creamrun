"""migrations recreation

Revision ID: bf121ebaa761
Revises: 
Create Date: 2025-11-21 10:30:12.854439

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = 'bf121ebaa761'
down_revision: Union[str, Sequence[str], None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('first_name', sa.String(length=128), nullable=True),
    sa.Column('middle_name', sa.String(length=128), nullable=True),
    sa.Column('last_name', sa.String(length=128), nullable=True),
    sa.Column('email_address', sa.String(length=255), nullable=True),
    sa.Column('password', sa.String(length=255), nullable=True),
    sa.Column('last_login', sa.DateTime(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_table('ach_batches',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('batch_number', sa.String(length=20), nullable=False, comment='Format: YYMM-XXX (e.g., 2510-001)'),
    sa.Column('batch_date', sa.DateTime(timezone=True), nullable=False, comment='When the batch was created'),
    sa.Column('effective_date', sa.Date(), nullable=False, comment='Effective entry date for ACH processing'),
    sa.Column('status', sa.Enum('DRAFT', 'CONFIRMED', 'NACHA_GENERATED', 'SUBMITTED', 'REVERSED', name='achbatchstatus'), nullable=False),
    sa.Column('total_payments', sa.Integer(), nullable=False, comment='Number of payments in batch'),
    sa.Column('total_amount', sa.Numeric(precision=12, scale=2), nullable=False, comment='Total dollar amount of batch'),
    sa.Column('nacha_file_path', sa.String(length=500), nullable=True, comment='S3 path to generated NACHA file'),
    sa.Column('nacha_generated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_reversed', sa.Boolean(), nullable=False),
    sa.Column('reversed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('reversed_by', sa.Integer(), nullable=True),
    sa.Column('reversal_reason', sa.Text(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['reversed_by'], ['users.id'], ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ach_batches_batch_number'), 'ach_batches', ['batch_number'], unique=True)
    op.create_index(op.f('ix_ach_batches_is_reversed'), 'ach_batches', ['is_reversed'], unique=False)
    op.create_index(op.f('ix_ach_batches_status'), 'ach_batches', ['status'], unique=False)
    op.create_table('address',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Address'),
    sa.Column('address_line_1', sa.String(length=255), nullable=True, comment='Line 1 of the Address'),
    sa.Column('address_line_2', sa.String(length=255), nullable=True, comment='Line 2 of the Address'),
    sa.Column('city', sa.String(length=255), nullable=True, comment='City of the Address'),
    sa.Column('state', sa.String(length=255), nullable=True, comment='State Name in the Address'),
    sa.Column('zip', sa.String(length=255), nullable=True, comment='Zip Code for the Address'),
    sa.Column('po_box', sa.String(length=255), nullable=True, comment='PO Box for the Address'),
    sa.Column('latitude', sa.String(length=255), nullable=True, comment='Latitude of the Address'),
    sa.Column('longitude', sa.String(length=255), nullable=True, comment='Longitude of the Address'),
    sa.Column('from_date', sa.DateTime(), nullable=True, comment='Address is effective from this date'),
    sa.Column('to_date', sa.DateTime(), nullable=True, comment='Address is effective till this date'),
    sa.Column('primary_contact_number', sa.String(length=255), nullable=True),
    sa.Column('primary_email_address', sa.String(length=255), nullable=True),
    sa.Column('additional_phone_1', sa.String(length=255), nullable=True),
    sa.Column('additional_phone_2', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('case_entities',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_no', sa.String(length=255), nullable=False),
    sa.Column('entity_name', sa.String(length=255), nullable=False),
    sa.Column('identifier', sa.String(length=255), nullable=False),
    sa.Column('identifier_value', sa.String(length=255), nullable=False),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_entities_id'), 'case_entities', ['id'], unique=False)
    op.create_table('case_statuses',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_statuses_id'), 'case_statuses', ['id'], unique=False)
    op.create_index(op.f('ix_case_statuses_name'), 'case_statuses', ['name'], unique=True)
    op.create_table('case_types',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=True),
    sa.Column('prefix', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_types_id'), 'case_types', ['id'], unique=False)
    op.create_index(op.f('ix_case_types_name'), 'case_types', ['name'], unique=True)
    op.create_index(op.f('ix_case_types_prefix'), 'case_types', ['prefix'], unique=True)
    op.create_table('company_bank_configuration',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('company_name', sa.String(length=255), nullable=False, comment='Company name for NACHA file'),
    sa.Column('company_tax_id', sa.String(length=10), nullable=False, comment='Company EIN or tax ID (10 digits)'),
    sa.Column('bank_name', sa.String(length=255), nullable=False),
    sa.Column('bank_routing_number', sa.String(length=9), nullable=False, comment='9-digit ABA routing number'),
    sa.Column('bank_account_number', sa.String(length=17), nullable=False, comment='Company account number (up to 17 digits)'),
    sa.Column('immediate_origin', sa.String(length=10), nullable=False, comment='10-digit originator ID for NACHA'),
    sa.Column('immediate_destination', sa.String(length=10), nullable=False, comment='10-digit destination routing for NACHA'),
    sa.Column('company_entry_description', sa.String(length=10), nullable=False, comment='Description for NACHA batch (max 10 chars)'),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('dealers',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Vehicles'),
    sa.Column('dealer_name', sa.String(length=255), nullable=True, comment='Name of the dealer'),
    sa.Column('dealer_bank_name', sa.String(length=255), nullable=True, comment='Name of the dealer bank name'),
    sa.Column('dealer_bank_account_number', sa.String(length=50), nullable=True, comment='Name of the dealer bank name'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('document',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Documents'),
    sa.Column('document_date', sa.DateTime(), nullable=True, comment='Date of the document.'),
    sa.Column('document_name', sa.String(length=255), nullable=True, comment='Name of the document'),
    sa.Column('document_format', sa.String(length=4), nullable=True, comment='Format of the document such as PDF, PNG, DOC, etc.'),
    sa.Column('document_actual_size', sa.Integer(), nullable=True, comment='Size of the document in KB'),
    sa.Column('document_path', sa.String(length=255), nullable=True, comment='Path where the document is stored'),
    sa.Column('document_saved_size', sa.Integer(), nullable=True, comment='Size of the document saved in KB.'),
    sa.Column('document_upload_date', sa.DateTime(), nullable=True, comment='Date and time when the document was scanned or uploaded'),
    sa.Column('document_note', sa.String(length=255), nullable=True, comment='Notes about the document'),
    sa.Column('document_type', sa.String(length=255), nullable=True, comment='Type of the document for eg ssn, license'),
    sa.Column('object_type', sa.String(length=20), nullable=True, comment='The type of the object, for eg medallion, vehicle, driver, lease etc'),
    sa.Column('object_lookup_field', sa.String(length=10), nullable=True, comment='A lookup to indicate the type of object medallion id, medallion_number'),
    sa.Column('object_lookup_id', sa.String(length=128), nullable=True, comment='The ID on which the lookup needs to happen'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('driver_dmv_license',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Driver'),
    sa.Column('is_dmv_license_active', sa.Boolean(), nullable=True),
    sa.Column('dmv_license_number', sa.String(length=255), nullable=True, comment='TLC License Number'),
    sa.Column('dmv_license_issued_state', sa.String(length=255), nullable=True, comment='TLC License Number'),
    sa.Column('dmv_class', sa.String(length=255), nullable=True),
    sa.Column('dmv_license_status', sa.String(length=255), nullable=True),
    sa.Column('dmv_class_change_date', sa.DateTime(), nullable=True, comment='TLC Class Change Date'),
    sa.Column('dmv_license_expiry_date', sa.DateTime(), nullable=True, comment='TLC License Expiry Date'),
    sa.Column('dmv_renewal_fee', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('driver_tlc_license',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Driver'),
    sa.Column('is_tlc_license_active', sa.Boolean(), nullable=True),
    sa.Column('tlc_license_number', sa.String(length=255), nullable=True, comment='TLC License Number'),
    sa.Column('tlc_issued_state', sa.String(length=255), nullable=True, comment='TLC License Number'),
    sa.Column('tlc_license_expiry_date', sa.DateTime(), nullable=True, comment='TLC License Expiry Date'),
    sa.Column('tlc_ddc_date', sa.DateTime(), nullable=True, comment='TLC DDC Date'),
    sa.Column('tlc_drug_test_date', sa.DateTime(), nullable=True, comment='TLC Drug Test Date'),
    sa.Column('previous_tlc_license_number', sa.String(length=255), nullable=True, comment='TLC License Number'),
    sa.Column('tlc_hack_date', sa.DateTime(), nullable=True, comment='TLC Hack Date'),
    sa.Column('tlc_lease_card_date', sa.DateTime(), nullable=True, comment='TLC Hack Date'),
    sa.Column('tlc_renewal_fee', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('esign_envelopes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('envelope_id', sa.String(length=255), nullable=False),
    sa.Column('status', sa.String(length=64), nullable=False),
    sa.Column('object_type', sa.String(length=64), nullable=False),
    sa.Column('object_id', sa.Integer(), nullable=False),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_esign_envelopes_envelope_id'), 'esign_envelopes', ['envelope_id'], unique=True)
    op.create_index(op.f('ix_esign_envelopes_id'), 'esign_envelopes', ['id'], unique=False)
    op.create_table('ezpass_imports',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('file_name', sa.String(length=255), nullable=False, comment='Original name of the uploaded CSV file.'),
    sa.Column('import_timestamp', sa.DateTime(timezone=True), nullable=False, comment='Timestamp when the import process began.'),
    sa.Column('status', sa.Enum('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED', name='ezpassimportstatus'), nullable=False),
    sa.Column('total_records', sa.Integer(), nullable=False, comment='Total number of rows in the CSV file.'),
    sa.Column('successful_records', sa.Integer(), nullable=False, comment='Number of records successfully imported.'),
    sa.Column('failed_records', sa.Integer(), nullable=False, comment='Number of records that failed validation.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ezpass_imports_id'), 'ezpass_imports', ['id'], unique=False)
    op.create_index(op.f('ix_ezpass_imports_status'), 'ezpass_imports', ['status'], unique=False)
    op.create_table('hackup_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('task_name', sa.String(length=255), nullable=True),
    sa.Column('drop_location', sa.String(length=255), nullable=True),
    sa.Column('drop_by', sa.String(length=255), nullable=True),
    sa.Column('drop_date', sa.Date(), nullable=True),
    sa.Column('completed_by', sa.String(length=255), nullable=True),
    sa.Column('completed_date', sa.Date(), nullable=True),
    sa.Column('status', sa.String(length=255), nullable=True),
    sa.Column('amount', sa.Float(), nullable=True),
    sa.Column('note', sa.Text(), nullable=True),
    sa.Column('is_task_done', sa.Boolean(), nullable=True),
    sa.Column('is_required', sa.Boolean(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('lease_payment_configuration',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('config_type', sa.String(length=128), nullable=True, comment='Config Type'),
    sa.Column('day_shift_amount', sa.Integer(), nullable=True, comment='Day shift payment'),
    sa.Column('night_shift_amount', sa.Integer(), nullable=True, comment='Night shift payment'),
    sa.Column('total_amount', sa.Integer(), nullable=True, comment='Total payment amount'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_payment_configuration_id'), 'lease_payment_configuration', ['id'], unique=False)
    op.create_table('lease_presets',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('lease_type', sa.String(length=50), nullable=False),
    sa.Column('vehicle_year', sa.Integer(), nullable=True),
    sa.Column('vehicle_make', sa.String(length=50), nullable=True),
    sa.Column('vehicle_model', sa.String(length=50), nullable=True),
    sa.Column('weekly_rate', sa.Float(), nullable=False),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_presets_id'), 'lease_presets', ['id'], unique=False)
    op.create_index(op.f('ix_lease_presets_lease_type'), 'lease_presets', ['lease_type'], unique=False)
    op.create_table('medallion_renewals',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Medallion Renewal'),
    sa.Column('medallion_number', sa.String(length=4), nullable=True, comment='Medallion number associated with the renewal'),
    sa.Column('renewal_date', sa.DateTime(), nullable=True, comment='Date when the renewal occurred'),
    sa.Column('renewal_from', sa.Date(), nullable=True, comment='Start date of the renewal period'),
    sa.Column('renewal_to', sa.Date(), nullable=True, comment='End date of the renewal period'),
    sa.Column('renewal_fee', sa.DECIMAL(precision=15, scale=2), nullable=True, comment='Fee for the renewal'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('medallion_storage',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Medallion Storage'),
    sa.Column('medallion_number', sa.String(length=64), nullable=True, comment='Medallion number associated with the storage'),
    sa.Column('storage_initiated_date', sa.Date(), nullable=True, comment='Date when the storage was initiated'),
    sa.Column('storage_date', sa.Date(), nullable=True, comment='Date when the storage was completed'),
    sa.Column('storage_mode', sa.CHAR(length=1), nullable=True, comment='Storage Mode: Physical (P) or Virtual (V)'),
    sa.Column('print_name', sa.String(length=255), nullable=True, comment='Persion Who Approve Storage'),
    sa.Column('storage_letter_signed_by', sa.Integer(), nullable=True, comment='User ID of the person who signed the storage letter'),
    sa.Column('storage_rate_card', sa.Date(), nullable=True, comment='Rate card date associated with the storage'),
    sa.Column('storage_reason', sa.String(length=45), nullable=True, comment='Reason for storage (no lookup planned currently)'),
    sa.Column('retrieval_date', sa.Date(), nullable=True, comment='Date when the Medallion was retrieved from storage'),
    sa.Column('retrieved_by', sa.String(length=255), nullable=True, comment='Document retrieved by user'),
    sa.Column('contract_signed_mode', sa.CHAR(length=1), nullable=True, comment='Contract signed mode: Print (P) or Mail (M) or In Person (I)'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('notes',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Note'),
    sa.Column('note_type', sa.String(length=128), nullable=True, comment='Type of the note'),
    sa.Column('note', sa.Text(), nullable=True, comment='Note content'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('pvb_imports',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('file_name', sa.String(length=255), nullable=False, comment='Original name of the uploaded CSV file.'),
    sa.Column('import_timestamp', sa.DateTime(timezone=True), nullable=False, comment='Timestamp when the import process began.'),
    sa.Column('status', sa.Enum('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED', name='pvbimportstatus'), nullable=False),
    sa.Column('total_records', sa.Integer(), nullable=False, comment='Total number of rows in the CSV file.'),
    sa.Column('successful_records', sa.Integer(), nullable=False, comment='Number of records successfully imported.'),
    sa.Column('failed_records', sa.Integer(), nullable=False, comment='Number of records that failed validation.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_pvb_imports_id'), 'pvb_imports', ['id'], unique=False)
    op.create_index(op.f('ix_pvb_imports_status'), 'pvb_imports', ['status'], unique=False)
    op.create_table('query_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('prompt', sa.Text(), nullable=False),
    sa.Column('validated_sql', sa.Text(), nullable=False),
    sa.Column('execution_status', sa.String(length=64), nullable=True),
    sa.Column('executed_at', sa.DateTime(), nullable=True),
    sa.Column('filters_applied', sa.JSON(), nullable=True),
    sa.Column('columns_returned', sa.JSON(), nullable=True),
    sa.Column('rows_returned', sa.Integer(), nullable=True),
    sa.Column('favorite', sa.Boolean(), nullable=True),
    sa.Column('is_shared', sa.Boolean(), nullable=True),
    sa.Column('exported_formats', sa.JSON(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_query_records_id'), 'query_records', ['id'], unique=False)
    op.create_table('roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=128), nullable=False),
    sa.Column('description', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_roles_id'), 'roles', ['id'], unique=False)
    op.create_table('bank_account',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for the Bank Account'),
    sa.Column('bank_name', sa.String(length=255), nullable=True, comment='Name of the Bank'),
    sa.Column('bank_account_number', sa.BigInteger(), nullable=True, comment='Bank Account Number'),
    sa.Column('bank_account_status', sa.String(length=255), nullable=True, comment='Account Status (Not used as a code)'),
    sa.Column('bank_account_name', sa.String(length=255), nullable=True, comment='Name of the Bank Account Holder'),
    sa.Column('effective_from', sa.Date(), nullable=True, comment='Date when the bank account if effective from'),
    sa.Column('bank_routing_number', sa.String(length=45), nullable=True, comment='Bank Routing Number to be used for ACH'),
    sa.Column('bank_account_type', sa.CHAR(length=1), nullable=True, comment='Bank Account Type to indicate Savings (S) or Checking (C)'),
    sa.Column('bank_address_id', sa.Integer(), nullable=True, comment='Bank Address Id used from the Address table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('case_reassignments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_no', sa.String(length=255), nullable=False),
    sa.Column('step_id', sa.String(length=255), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('user_id_at_assignment', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['user_id_at_assignment'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_reassignments_id'), 'case_reassignments', ['id'], unique=False)
    op.create_index(op.f('ix_case_reassignments_step_id'), 'case_reassignments', ['step_id'], unique=False)
    op.create_table('case_steps',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=True),
    sa.Column('case_type_id', sa.Integer(), nullable=False),
    sa.Column('weight', sa.Integer(), nullable=False),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_type_id'], ['case_types.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_steps_id'), 'case_steps', ['id'], unique=False)
    op.create_index(op.f('ix_case_steps_name'), 'case_steps', ['name'], unique=True)
    op.create_table('corporation',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Corporation'),
    sa.Column('name', sa.String(length=255), nullable=True, comment='Name of the Corporation'),
    sa.Column('is_holding_entity', sa.Boolean(), nullable=True, comment='Indicates if the Corporation is a Holding Entity'),
    sa.Column('ein', sa.String(length=255), nullable=True, comment='EIN of the Corporation'),
    sa.Column('is_llc', sa.Boolean(), nullable=True, comment='Indicates if the Corporation is an LLC'),
    sa.Column('primary_contact_number', sa.String(length=255), nullable=True, comment='Primary phone number for the Corporation'),
    sa.Column('primary_email_address', sa.String(length=255), nullable=True, comment='Primary email address for the Corporation'),
    sa.Column('primary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Address table for primary address'),
    sa.Column('secondary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Address table for secondary address'),
    sa.Column('registered_date', sa.DateTime(), nullable=True, comment='Date when the Corporation was registered'),
    sa.Column('linked_pad_owner_id', sa.Integer(), nullable=True),
    sa.Column('contract_signed_mode', sa.CHAR(length=1), nullable=True, comment='Contract Signed Mode: In Person (I) or by Mail (M) or Print (P)'),
    sa.Column('is_mailing_address_same', sa.Boolean(), nullable=True, comment='Indicates whether the mailing address is the same as the primary address'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['linked_pad_owner_id'], ['corporation.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['primary_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['secondary_address_id'], ['address.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_corporation_primary_address_id'), 'corporation', ['primary_address_id'], unique=False)
    op.create_index(op.f('ix_corporation_secondary_address_id'), 'corporation', ['secondary_address_id'], unique=False)
    op.create_table('shared_queries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('query_id', sa.Integer(), nullable=True),
    sa.Column('shared_with_user_id', sa.Integer(), nullable=True),
    sa.Column('shared_by_user_id', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['query_id'], ['query_records.id'], ),
    sa.ForeignKeyConstraint(['shared_by_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['shared_with_user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_shared_queries_id'), 'shared_queries', ['id'], unique=False)
    op.create_table('users_and_roles',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('user_id', 'role_id')
    )
    op.create_table('vehicle_entity',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('entity_name', sa.String(length=255), nullable=True),
    sa.Column('owner_id', sa.Integer(), nullable=True),
    sa.Column('entity_status', sa.String(length=255), nullable=True),
    sa.Column('ein', sa.String(length=255), nullable=True),
    sa.Column('entity_address_id', sa.Integer(), nullable=True),
    sa.Column('contact_number', sa.String(length=255), nullable=True),
    sa.Column('contact_email', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['entity_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('owner_id')
    )
    op.create_table('case_reassignment_assigned_by_roles',
    sa.Column('case_reassignment_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['case_reassignment_id'], ['case_reassignments.id'], ),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.PrimaryKeyConstraint('case_reassignment_id', 'role_id')
    )
    op.create_table('case_reassignment_roles_at_assignment',
    sa.Column('case_reassignment_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['case_reassignment_id'], ['case_reassignments.id'], ),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.PrimaryKeyConstraint('case_reassignment_id', 'role_id')
    )
    op.create_table('case_step_configs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('step_id', sa.String(length=255), nullable=True),
    sa.Column('step_name', sa.String(length=255), nullable=True),
    sa.Column('case_step_id', sa.Integer(), nullable=False),
    sa.Column('case_type_id', sa.Integer(), nullable=False),
    sa.Column('current_assignee_id', sa.Integer(), nullable=True),
    sa.Column('next_assignee_id', sa.Integer(), nullable=True),
    sa.Column('next_step_id', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_step_id'], ['case_steps.id'], ),
    sa.ForeignKeyConstraint(['case_type_id'], ['case_types.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['current_assignee_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['next_assignee_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_step_configs_id'), 'case_step_configs', ['id'], unique=False)
    op.create_index(op.f('ix_case_step_configs_step_id'), 'case_step_configs', ['step_id'], unique=True)
    op.create_index(op.f('ix_case_step_configs_step_name'), 'case_step_configs', ['step_name'], unique=True)
    op.create_table('drivers',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Driver'),
    sa.Column('first_name', sa.String(length=128), nullable=True, comment='First Name of the Driver'),
    sa.Column('middle_name', sa.String(length=128), nullable=True, comment='Middle Name of the Driver'),
    sa.Column('last_name', sa.String(length=128), nullable=True, comment='Last Name of the Driver'),
    sa.Column('full_name', sa.String(length=128), nullable=True, comment='Full Name of the Driver'),
    sa.Column('ssn', sa.String(length=128), nullable=True, comment='Social Security Number of the Driver'),
    sa.Column('dob', sa.String(length=64), nullable=True),
    sa.Column('phone_number_1', sa.String(length=18), nullable=True),
    sa.Column('phone_number_2', sa.String(length=18), nullable=True),
    sa.Column('email_address', sa.String(length=128), nullable=True),
    sa.Column('driver_id', sa.String(length=128), nullable=True),
    sa.Column('outstanding_receivables', sa.String(length=255), nullable=True, comment='Outstanding Receivables for the Driver'),
    sa.Column('outstanding_payments', sa.String(length=255), nullable=True, comment='Outstanding Payments for the Driver'),
    sa.Column('violation_due_at_registration', sa.String(length=255), nullable=True, comment='Violation due at registration'),
    sa.Column('driver_type', sa.String(length=64), nullable=True, comment='Type of the Driver, WAV Or Regular'),
    sa.Column('drive_locked', sa.Boolean(), nullable=True, comment='Indicates if the Driver is Locked'),
    sa.Column('driver_status', sa.String(length=50), nullable=True, comment='Driver status can be Registration In Progress, Registered, Approved, Active or Inactive'),
    sa.Column('is_additional_driver', sa.Boolean(), nullable=True, comment='Flag indicating if this is an Additional Driver'),
    sa.Column('driver_manager_id', sa.Integer(), nullable=True, comment='Foreign Key to Drivers table for Manager'),
    sa.Column('contract_end_date', sa.String(length=255), nullable=True, comment='Contract End Date'),
    sa.Column('contract_start_date', sa.String(length=255), nullable=True, comment='Contract Start Date'),
    sa.Column('pay_to', sa.String(length=128), nullable=True, comment='Name of the person to whom payment has to be made'),
    sa.Column('pay_to_mode', sa.String(length=128), nullable=True, comment='Would be with Check or ACH'),
    sa.Column('other_payment_options', sa.String(length=128), nullable=True, comment='Other Payment options Pay By Cash, Pay by Checks or Pay by credit card'),
    sa.Column('other_payment_details', sa.String(length=128), nullable=True, comment='Payment details when Pay By Cash, Pay by Checks or Pay by credit card is selected'),
    sa.Column('primary_emergency_contact_person', sa.String(length=128), nullable=True, comment='Primary emergency contact detail'),
    sa.Column('primary_emergency_contact_relationship', sa.String(length=128), nullable=True, comment='Relation with primary emergency contact'),
    sa.Column('primary_emergency_contact_number', sa.String(length=128), nullable=True, comment='Relation with primary emergency contact number'),
    sa.Column('additional_emergency_contact_person', sa.String(length=128), nullable=True, comment='Additional emergency contact detail'),
    sa.Column('additional_emergency_contact_relationship', sa.String(length=128), nullable=True, comment='Relation with additional emergency contact'),
    sa.Column('additional_emergency_contact_number', sa.String(length=128), nullable=True, comment='Relation with additional emergency contact number'),
    sa.Column('bank_account_id', sa.Integer(), nullable=True, comment='Foreign Key to Bank Account'),
    sa.Column('primary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Address (Primary) table for Driver Address'),
    sa.Column('secondary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Address (Secondary) table for Driver Address'),
    sa.Column('tlc_license_number_id', sa.Integer(), nullable=True, comment='Foreign Key to TCL License Table'),
    sa.Column('dmv_license_number_id', sa.Integer(), nullable=True, comment='Foreign Key to DMV License Table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['dmv_license_number_id'], ['driver_dmv_license.id'], ),
    sa.ForeignKeyConstraint(['driver_manager_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['primary_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['secondary_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['tlc_license_number_id'], ['driver_tlc_license.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_drivers_bank_account_id'), 'drivers', ['bank_account_id'], unique=False)
    op.create_index(op.f('ix_drivers_dmv_license_number_id'), 'drivers', ['dmv_license_number_id'], unique=False)
    op.create_index(op.f('ix_drivers_driver_id'), 'drivers', ['driver_id'], unique=True)
    op.create_index(op.f('ix_drivers_driver_manager_id'), 'drivers', ['driver_manager_id'], unique=False)
    op.create_index(op.f('ix_drivers_primary_address_id'), 'drivers', ['primary_address_id'], unique=False)
    op.create_index(op.f('ix_drivers_secondary_address_id'), 'drivers', ['secondary_address_id'], unique=False)
    op.create_index(op.f('ix_drivers_tlc_license_number_id'), 'drivers', ['tlc_license_number_id'], unique=False)
    op.create_table('individual',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key'),
    sa.Column('first_name', sa.String(length=255), nullable=True),
    sa.Column('middle_name', sa.String(length=64), nullable=True),
    sa.Column('last_name', sa.String(length=255), nullable=True),
    sa.Column('primary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Primary Address in Address table'),
    sa.Column('secondary_address_id', sa.Integer(), nullable=True, comment='Foreign Key to Secondary Address in Address table'),
    sa.Column('bank_account_id', sa.Integer(), nullable=True, comment='Foreign Key to id in the Bank Account table'),
    sa.Column('masked_ssn', sa.String(length=255), nullable=True),
    sa.Column('dob', sa.String(length=255), nullable=True),
    sa.Column('passport', sa.String(length=255), nullable=True),
    sa.Column('passport_expiry_date', sa.DateTime(), nullable=True),
    sa.Column('driving_license', sa.String(length=255), nullable=True),
    sa.Column('driving_license_expiry_date', sa.DateTime(), nullable=True),
    sa.Column('full_name', sa.String(length=255), nullable=True),
    sa.Column('primary_contact_number', sa.String(length=255), nullable=True),
    sa.Column('additional_phone_number_1', sa.String(length=255), nullable=True),
    sa.Column('additional_phone_number_2', sa.String(length=255), nullable=True),
    sa.Column('primary_email_address', sa.String(length=255), nullable=True),
    sa.Column('payee', sa.String(length=255), nullable=True),
    sa.Column('pay_to_mode', sa.String(length=25), nullable=True, comment='Pay to Mode: Check and ACH'),
    sa.Column('correspondence_method', sa.String(length=255), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['primary_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['secondary_address_id'], ['address.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_individual_primary_address_id'), 'individual', ['primary_address_id'], unique=False)
    op.create_index(op.f('ix_individual_secondary_address_id'), 'individual', ['secondary_address_id'], unique=False)
    op.create_table('mo_leases',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('payee', sa.String(length=255), nullable=True, comment='Name of the Payee for the MO Lease'),
    sa.Column('bank_account_id', sa.Integer(), nullable=True, comment='Foreign Key to Bank Account table'),
    sa.Column('contract_start_date', sa.Date(), nullable=True, comment='Start Date of the Contract'),
    sa.Column('contract_end_date', sa.Date(), nullable=True, comment='End Date of the Contract'),
    sa.Column('royalty_amount', sa.DECIMAL(precision=15, scale=2), nullable=True, comment='Royalty Amount for the MO Lease'),
    sa.Column('contract_term', sa.String(length=64), nullable=True, comment='Contract Term for the MO Lease'),
    sa.Column('contract_signed_mode', sa.CHAR(length=1), nullable=True, comment='Contract Signed Mode: In Person (I) or by Mail (M)'),
    sa.Column('mail_sent_date', sa.Date(), nullable=True, comment='Date when the contract mail was sent'),
    sa.Column('mail_received_date', sa.Date(), nullable=True, comment='Date when the contract mail was received after signature'),
    sa.Column('lease_signed_flag', sa.Boolean(), nullable=True, comment='Indicator if the lease is signed'),
    sa.Column('lease_signed_date', sa.Date(), nullable=True, comment='Date when the lease was signed'),
    sa.Column('in_house_lease', sa.CHAR(length=1), nullable=True, comment='Indicator if the lease is of In House type'),
    sa.Column('med_active_exemption', sa.CHAR(length=1), nullable=True, comment='Indicator to pay (Y) the Management Fee even if the Medallion is not active'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('case_step_config_paths',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_step_config_id', sa.Integer(), nullable=False),
    sa.Column('path', sa.String(length=255), nullable=True, comment='File path to JSON schema'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_step_config_id'], ['case_step_configs.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_step_config_paths_id'), 'case_step_config_paths', ['id'], unique=False)
    op.create_table('case_step_config_role',
    sa.Column('case_step_config_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['case_step_config_id'], ['case_step_configs.id'], ),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.PrimaryKeyConstraint('case_step_config_id', 'role_id')
    )
    op.create_table('case_type_first_steps',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_type_id', sa.Integer(), nullable=False),
    sa.Column('first_step_id', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_type_id'], ['case_types.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['first_step_id'], ['case_step_configs.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_case_type_first_steps_id'), 'case_type_first_steps', ['id'], unique=False)
    op.create_table('corporation_owners',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Corporation Owners'),
    sa.Column('corporation_id', sa.Integer(), nullable=False, comment='Foreign Key to Corporation table'),
    sa.Column('name', sa.String(length=255), nullable=True, comment='Name of the Corporation Owner'),
    sa.Column('owner_type', sa.String(length=25), nullable=True, comment='Owner Type: manager or member'),
    sa.Column('owner_id', sa.Integer(), nullable=True, comment='Owner Id from Individual table'),
    sa.Column('is_payee', sa.Boolean(), nullable=True, comment='Indicates if the Corporation Owner is a Payee'),
    sa.Column('is_primary_contact', sa.Boolean(), nullable=True, comment='Indicates if the Corporation Owner is the Primary Contact'),
    sa.Column('is_authorized_signatory', sa.Boolean(), nullable=True, comment='Indicates if the Corporation Owner is an Authorized Signatory'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['corporation_id'], ['corporation.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['owner_id'], ['individual.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_corporation_owners_corporation_id'), 'corporation_owners', ['corporation_id'], unique=False)
    op.create_table('corporation_payees',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Corporation Payee'),
    sa.Column('corporation_id', sa.Integer(), nullable=False, comment='Foreign Key to Corporation table'),
    sa.Column('payee_type', sa.String(length=25), nullable=True, comment='Payee Type: Individual or Corporation'),
    sa.Column('individual_id', sa.Integer(), nullable=True, comment='Payee ID: Foreign Key to Individual table based on the Payee Type'),
    sa.Column('corporation_owner_id', sa.Integer(), nullable=True, comment='Payee ID: Foreign Key to Corporation table based on the Payee Type'),
    sa.Column('pay_to_mode', sa.String(length=25), nullable=True, comment='Pay to Mode: Check and ACH'),
    sa.Column('payee', sa.String(length=255), nullable=True, comment='Payee for the Corporation'),
    sa.Column('bank_account_id', sa.Integer(), nullable=True, comment='Foreign Key to id in the Bank Account table'),
    sa.Column('sequence', sa.Integer(), nullable=True, comment='Sequence of the Payee'),
    sa.Column('allocation_percentage', sa.Numeric(precision=5, scale=2), nullable=True, comment='Allocation Percentage for the Payee'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['corporation_id'], ['corporation.id'], ),
    sa.ForeignKeyConstraint(['corporation_owner_id'], ['corporation.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['individual_id'], ['individual.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('driver_notes',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for DriverNote'),
    sa.Column('driver_id', sa.Integer(), nullable=False, comment='Foreign Key to Driver Table'),
    sa.Column('note_id', sa.Integer(), nullable=False, comment='Foreign Key to Note Table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['note_id'], ['notes.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_driver_notes_driver_id'), 'driver_notes', ['driver_id'], unique=False)
    op.create_index(op.f('ix_driver_notes_note_id'), 'driver_notes', ['note_id'], unique=False)
    op.create_table('entity',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for the Entity'),
    sa.Column('dos_id', sa.String(length=255), nullable=True, comment='DOS Identifier for the Entity'),
    sa.Column('entity_name', sa.String(length=255), nullable=True, comment='Name of the Entity also known as Management Name'),
    sa.Column('original_title', sa.String(length=255), nullable=True, comment='Vehicle-related field retained for data migration'),
    sa.Column('registered_date', sa.DateTime(), nullable=True, comment='Date when the Entity was registered'),
    sa.Column('is_corporation', sa.Boolean(), nullable=True, comment='Indicates if the Entity is a Corporation'),
    sa.Column('contact_person_id', sa.Integer(), nullable=True, comment='Foreign Key to Individual table for contact person'),
    sa.Column('bank_id', sa.Integer(), nullable=True, comment='Bank Identifier for the Entity'),
    sa.Column('entity_address_id', sa.Integer(), nullable=True, comment="Foreign Key to Address table for the Entity's address"),
    sa.Column('owner', sa.Integer(), nullable=True, comment='Owner of the Entity, referenced from Individual table'),
    sa.Column('joint_owner', sa.Integer(), nullable=True, comment='Joint Owner of the Entity, referenced from Individual table'),
    sa.Column('num_corporations', sa.Integer(), nullable=True, comment='Number of corporations under the Entity'),
    sa.Column('ein_ssn', sa.String(length=255), nullable=True),
    sa.Column('president', sa.String(length=128), nullable=True, comment='ID of the President'),
    sa.Column('secretary', sa.String(length=128), nullable=True, comment='ID of the Secretary'),
    sa.Column('corporate_officer', sa.String(length=128), nullable=True, comment='ID of the Corporate Officer'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bank_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['contact_person_id'], ['individual.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['entity_address_id'], ['address.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_entity_entity_address_id'), 'entity', ['entity_address_id'], unique=False)
    op.create_table('medallion_owners',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key'),
    sa.Column('medallion_owner_type', sa.CHAR(length=1), nullable=True, comment='Individual (I) or Corporation (C)'),
    sa.Column('primary_phone', sa.CHAR(length=24), nullable=True),
    sa.Column('primary_email_address', sa.String(length=100), nullable=True),
    sa.Column('medallion_owner_status', sa.CHAR(length=1), nullable=True, comment='Status: Active (Y), Archived (N), or In Progress (I)'),
    sa.Column('active_till', sa.Date(), nullable=True),
    sa.Column('individual_id', sa.Integer(), nullable=True, comment='Primary Contact Person. Referred from Individual Table.'),
    sa.Column('corporation_id', sa.Integer(), nullable=True, comment='Foreign Key to Corporation table'),
    sa.Column('primary_address_id', sa.Integer(), nullable=True, comment='Address Id used from the Address table'),
    sa.Column('update_address_sign_mode', sa.CHAR(length=1), nullable=True, comment='Update Address Signed Mode: In Person (I) or by Mail (M) or Print (P)'),
    sa.Column('is_mailing_address_same', sa.Boolean(), nullable=True, comment='Indicator if the mailing address is same as primary address'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['corporation_id'], ['corporation.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['individual_id'], ['individual.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['primary_address_id'], ['address.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('slas',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False, comment='Name of the SLA'),
    sa.Column('case_step_config_id', sa.Integer(), nullable=False),
    sa.Column('time_limit', sa.Integer(), nullable=False, comment='Time limit in minutes for the SLA'),
    sa.Column('is_active', sa.Boolean(), nullable=False, comment='Flag to indicate if the SLA is active'),
    sa.Column('escalation_level', sa.Integer(), nullable=False, comment='Escalation level for SLA'),
    sa.Column('role_id', sa.Integer(), nullable=True, comment='Role assigned to this SLA'),
    sa.Column('user_id', sa.Integer(), nullable=True, comment='User assigned to this SLA'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_step_config_id'], ['case_step_configs.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_slas_id'), 'slas', ['id'], unique=False)
    op.create_index(op.f('ix_slas_name'), 'slas', ['name'], unique=True)
    op.create_table('cases',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_no', sa.String(length=255), nullable=False),
    sa.Column('case_type_id', sa.Integer(), nullable=False),
    sa.Column('case_status_id', sa.Integer(), nullable=False),
    sa.Column('sla_id', sa.Integer(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('role_id', sa.Integer(), nullable=True),
    sa.Column('case_step_config_id', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_status_id'], ['case_statuses.id'], ),
    sa.ForeignKeyConstraint(['case_step_config_id'], ['case_step_configs.id'], ),
    sa.ForeignKeyConstraint(['case_type_id'], ['case_types.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['sla_id'], ['slas.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_cases_id'), 'cases', ['id'], unique=False)
    op.create_table('medallions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('medallion_number', sa.CHAR(length=64), nullable=True, comment='Medallion Number by which the Medallion is identified'),
    sa.Column('medallion_type', sa.CHAR(length=24), nullable=True, comment='Medallion Type which could be Wav or Regular'),
    sa.Column('owner_type', sa.CHAR(length=1), nullable=True, comment='Owner Type is Corporation (C) or Individual (I)'),
    sa.Column('hack_indicator', sa.String(length=255), nullable=True),
    sa.Column('medallion_status', sa.CHAR(length=1), nullable=True, comment='The status of the Medallion. Possible statuses: I, A, V, Y, N'),
    sa.Column('medallion_renewal_date', sa.Date(), nullable=True, comment='Date when the Medallion renewal is due'),
    sa.Column('validity_start_date', sa.String(length=255), nullable=True, comment='Validity Start Date as per the recent renewal'),
    sa.Column('validity_end_date', sa.String(length=255), nullable=True, comment='Validity End Date as per the recent renewal'),
    sa.Column('first_signed', sa.String(length=255), nullable=True),
    sa.Column('merchant_name', sa.String(length=255), nullable=True, comment='Retained for Data Migration if required.'),
    sa.Column('default_amount', sa.String(length=255), nullable=True),
    sa.Column('agent_number', sa.Integer(), nullable=True),
    sa.Column('agent_name', sa.String(length=255), nullable=True),
    sa.Column('manger_name', sa.String(length=255), nullable=True, comment='Retained for Data Migration from older system.'),
    sa.Column('pay_to', sa.String(length=255), nullable=True, comment='Name of the person to whom payment has to be made'),
    sa.Column('last_renewal_date', sa.Date(), nullable=True, comment='Date when the Medallion was renewed last time'),
    sa.Column('renewal_path', sa.String(length=64), nullable=True),
    sa.Column('fs6_status', sa.CHAR(length=1), nullable=True),
    sa.Column('fs6_date', sa.DateTime(), nullable=True),
    sa.Column('mo_leases_id', sa.Integer(), nullable=True, comment='The id of the MO Leases.'),
    sa.Column('owner_id', sa.Integer(), nullable=True, comment='The id of the Medallion Owner. It is referenced from the Medallion Owner table.'),
    sa.Column('merchant_owner_id', sa.Integer(), nullable=True, comment='Retained for Data Migration if required.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['merchant_owner_id'], ['bank_account.id'], ),
    sa.ForeignKeyConstraint(['mo_leases_id'], ['mo_leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['owner_id'], ['medallion_owners.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('medallion_number')
    )
    op.create_table('audit_trail',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('timestamp', sa.DateTime(), nullable=False),
    sa.Column('done_by', sa.Integer(), nullable=True),
    sa.Column('user_role', sa.String(length=255), nullable=True),
    sa.Column('case_id', sa.Integer(), nullable=True),
    sa.Column('case_type', sa.String(length=255), nullable=True),
    sa.Column('case_no', sa.String(length=255), nullable=True),
    sa.Column('step_name', sa.String(length=255), nullable=True),
    sa.Column('description', sa.String(length=255), nullable=True),
    sa.Column('audit_trail_type', sa.Enum('AUTOMATED', 'MANUAL', name='audittrailtype'), nullable=False),
    sa.Column('meta_data', sa.JSON(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['case_id'], ['cases.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['done_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_audit_trail_id'), 'audit_trail', ['id'], unique=False)
    op.create_table('medallion_notes',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for MedallionNote'),
    sa.Column('medallion_id', sa.Integer(), nullable=False, comment='Foreign Key to Medallion Table'),
    sa.Column('note_id', sa.Integer(), nullable=False, comment='Foreign Key to Note Table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['note_id'], ['notes.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_medallion_notes_medallion_id'), 'medallion_notes', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_medallion_notes_note_id'), 'medallion_notes', ['note_id'], unique=False)
    op.create_table('vehicles',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Vehicles'),
    sa.Column('vin', sa.String(length=64), nullable=True, comment='Vehicle Identification Number'),
    sa.Column('make', sa.String(length=45), nullable=True, comment='Make of the vehicle'),
    sa.Column('model', sa.String(length=45), nullable=True, comment='Model of the vehicle'),
    sa.Column('year', sa.String(length=4), nullable=True),
    sa.Column('cylinders', sa.Integer(), nullable=True),
    sa.Column('color', sa.String(length=50), nullable=True),
    sa.Column('vehicle_type', sa.String(length=255), nullable=True, comment='Would be either Regular or Wav'),
    sa.Column('is_hybrid', sa.Boolean(), nullable=True, comment='Is the vehicle hybrid or not'),
    sa.Column('base_price', sa.Float(), nullable=True, comment='Base price of the vehicle'),
    sa.Column('sales_tax', sa.Float(), nullable=True, comment='Sales tax applied to the vehicle'),
    sa.Column('vehicle_total_price', sa.Integer(), nullable=True, comment='Total cost of the vehicle'),
    sa.Column('vehicle_true_cost', sa.Integer(), nullable=True, comment='True cost typically could mean that hack up costs and other miscellaneous costs are accounted'),
    sa.Column('vehicle_hack_up_cost', sa.Integer(), nullable=True, comment='Total hack up cost of the vehicle'),
    sa.Column('vehicle_lifetime_cap', sa.Integer(), nullable=True, comment='Cap calculated off between true cost or tlc cap'),
    sa.Column('invoice_number', sa.String(length=255), nullable=True, comment='Invoice number of the vehicle'),
    sa.Column('invoice_date', sa.Date(), nullable=True, comment='Invoice date of the vehicle'),
    sa.Column('vehicle_office', sa.String(length=255), nullable=True, comment='Vehicle Office'),
    sa.Column('is_delivered', sa.Boolean(), nullable=True, comment='Is the vehicle hybrid or not'),
    sa.Column('expected_delivery_date', sa.Date(), nullable=True, comment='The expected delivery date of the vehicle'),
    sa.Column('delivery_location', sa.String(length=255), nullable=True, comment='Delivery location of the vehicle'),
    sa.Column('delivery_note', sa.Text(), nullable=True, comment='Delivery note for the vehicle'),
    sa.Column('is_insurance_procured', sa.Boolean(), nullable=True, comment='The insurance procured for the vehicle'),
    sa.Column('is_medallion_assigned', sa.Boolean(), nullable=True, comment='Is a medallion allocated to the vehicle'),
    sa.Column('vehicle_status', sa.String(length=50), nullable=True, comment='Status of the vehicle - one among Registration In Progress, Registered, Delivered, Hacked, Active & Inactive'),
    sa.Column('entity_id', sa.Integer(), nullable=True, comment='Foreign Key to Entity Table'),
    sa.Column('dealer_id', sa.Integer(), nullable=True, comment='Foreign Key to dealer Table'),
    sa.Column('medallion_id', sa.Integer(), nullable=True, comment='Foreign Key to medallion Table'),
    sa.Column('tsp', sa.String(length=255), nullable=True, comment='Taxi and Limousine Commission (TLC) Permit'),
    sa.Column('security_type', sa.String(length=255), nullable=True, comment='Security Type'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['dealer_id'], ['dealers.id'], ),
    sa.ForeignKeyConstraint(['entity_id'], ['vehicle_entity.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('leases',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.String(length=255), nullable=True, comment='Lease ID'),
    sa.Column('lease_type', sa.String(length=50), nullable=True, comment='Type of lease'),
    sa.Column('medallion_id', sa.Integer(), nullable=True, comment='Foreign Key to medallion Table'),
    sa.Column('vehicle_id', sa.Integer(), nullable=True, comment='Foreign Key to Vehicles Table'),
    sa.Column('lease_start_date', sa.Date(), nullable=True, comment='Date of lease start date'),
    sa.Column('lease_end_date', sa.Date(), nullable=True, comment='Date of lease end date'),
    sa.Column('duration_in_weeks', sa.Integer(), nullable=True, comment='Date of lease end date'),
    sa.Column('is_auto_renewed', sa.Boolean(), nullable=True, comment='Has the lease been auto renewed'),
    sa.Column('is_day_shift', sa.Boolean(), nullable=True, comment='day shift'),
    sa.Column('is_night_shift', sa.Boolean(), nullable=True, comment='night shift'),
    sa.Column('repairs_responsibility', sa.String(length=100), nullable=True, comment='Repairs responsibility'),
    sa.Column('lease_date', sa.Date(), nullable=True, comment='Date of lease'),
    sa.Column('lease_status', sa.String(length=48), nullable=True, comment='Status of lease (A,C or R)'),
    sa.Column('lease_pay_day', sa.String(length=3), nullable=True, comment='Day for lease payment'),
    sa.Column('lease_payments_type', sa.String(length=15), nullable=True, comment='Behind or Advanced'),
    sa.Column('deposit_amount_paid', sa.Integer(), nullable=True, comment='Amount for lease payments type'),
    sa.Column('management_recommendation_amount', sa.Integer(), nullable=True, comment='Amount recommended for management'),
    sa.Column('lease_remark', sa.String(length=255), nullable=True, comment='Remarks for lease'),
    sa.Column('cancellation_fee', sa.Integer(), nullable=True, comment='Calculated vehicle lease'),
    sa.Column('additional_balance_due', sa.Integer(), nullable=True, comment='Additional Balance Due'),
    sa.Column('total_segments', sa.Integer(), nullable=True, comment='Total segments in the lease'),
    sa.Column('current_segment', sa.Integer(), nullable=True, comment='Current segment of the lease'),
    sa.Column('last_renewed_date', sa.Date(), nullable=True, comment='Last date when the lease was renewed'),
    sa.Column('preset_weekly_rate', sa.Float(), nullable=True, comment='The default rate from the LeasePreset table at time of creation'),
    sa.Column('overridden_weekly_rate', sa.Float(), nullable=True, comment='The manually overridden rate, if any'),
    sa.Column('override_reason', sa.String(length=255), nullable=True),
    sa.Column('termination_date', sa.Date(), nullable=True, comment='Date when the lease was terminated'),
    sa.Column('termination_reason', sa.String(length=500), nullable=True, comment='Reason for lease termination'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('lease_id')
    )
    op.create_index(op.f('ix_leases_id'), 'leases', ['id'], unique=False)
    op.create_table('vehicle_expenses_and_compliance',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('category', sa.String(length=255), nullable=True),
    sa.Column('sub_type', sa.String(length=255), nullable=True),
    sa.Column('invoice_number', sa.String(length=255), nullable=True),
    sa.Column('base_price', sa.Float(), nullable=True),
    sa.Column('sales_tax', sa.Float(), nullable=True),
    sa.Column('amount', sa.Float(), nullable=True),
    sa.Column('vendor_name', sa.String(length=255), nullable=True),
    sa.Column('issue_date', sa.Date(), nullable=True),
    sa.Column('expiry_date', sa.Date(), nullable=True),
    sa.Column('meter_serial_no', sa.String(length=255), nullable=True),
    sa.Column('mile_run_due_date', sa.Date(), nullable=True),
    sa.Column('specific_info', sa.Text(), nullable=True),
    sa.Column('note', sa.Text(), nullable=True),
    sa.Column('document_id', sa.Integer(), nullable=True),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['deleted_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['document_id'], ['document.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('vehicle_hackups',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Vehicle HackUp'),
    sa.Column('vehicle_id', sa.Integer(), nullable=False, comment='Foreign Key to Vehicles table'),
    sa.Column('tpep_provider', sa.String(length=255), nullable=True, comment='TPEP Type selected by the user'),
    sa.Column('configuration_type', sa.String(length=255), nullable=True, comment='Configuration type Camera or Partition'),
    sa.Column('paint_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('camera_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('partition_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('meter_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('meter_serial_number', sa.String(length=255), nullable=True, comment='Serial number of the installed meter'),
    sa.Column('rooftop_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('dmv_registration_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('tlc_inspection_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('dealership_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('bat_garage_task_id', sa.Integer(), nullable=True, comment='Foreign Key to HackUp Tasks table'),
    sa.Column('is_insurance_procured', sa.Boolean(), nullable=True, comment='The insurance procured for the vehicle'),
    sa.Column('insurance_number', sa.String(length=255), nullable=True, comment='Insurance number of the vehicle'),
    sa.Column('insurance_start_date', sa.Date(), nullable=True, comment='Insurance start date of the vehicle'),
    sa.Column('insurance_end_date', sa.Date(), nullable=True, comment='Insurance end date of the vehicle'),
    sa.Column('status', sa.String(length=50), nullable=False, comment='HackUp Status'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['bat_garage_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['camera_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['dealership_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['dmv_registration_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['meter_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['paint_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['partition_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['rooftop_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['tlc_inspection_task_id'], ['hackup_tasks.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('vehicle_inspections',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Vehicle Inspections'),
    sa.Column('vehicle_id', sa.Integer(), nullable=False, comment='Foreign Key to Vehicle table'),
    sa.Column('inspection_type', sa.String(length=255), nullable=True, comment='Type of inspection conducted'),
    sa.Column('mile_run', sa.Boolean(), nullable=True, comment='Indicates if a mile run was completed'),
    sa.Column('inspection_date', sa.Date(), nullable=True, comment='Date of inspection'),
    sa.Column('inspection_time', sa.String(length=255), nullable=True, comment='Time of inspection'),
    sa.Column('odometer_reading_date', sa.Date(), nullable=True, comment='Date of odometer reading'),
    sa.Column('odometer_reading_time', sa.String(length=255), nullable=True, comment='Time of odometer reading'),
    sa.Column('odometer_reading', sa.Integer(), nullable=True, comment='Odometer reading at the time of inspection'),
    sa.Column('logged_date', sa.Date(), nullable=True, comment='Date when the inspection details were logged'),
    sa.Column('logged_time', sa.String(length=255), nullable=True, comment='Time when the inspection details were logged'),
    sa.Column('inspection_fee', sa.Float(), nullable=True, comment='Fee charged for the inspection'),
    sa.Column('result', sa.Enum('Pass', 'Fail', name='inspection_result'), nullable=True, comment='Result of the inspection'),
    sa.Column('next_inspection_due_date', sa.Date(), nullable=True, comment='Date when the next inspection is due'),
    sa.Column('status', sa.String(length=50), nullable=False, comment='Registration Status'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('vehicle_notes',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for VehicleNote'),
    sa.Column('vehicle_id', sa.Integer(), nullable=False, comment='Foreign Key to Vehicle Table'),
    sa.Column('note_id', sa.Integer(), nullable=False, comment='Foreign Key to Note Table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['note_id'], ['notes.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vehicle_notes_note_id'), 'vehicle_notes', ['note_id'], unique=False)
    op.create_index(op.f('ix_vehicle_notes_vehicle_id'), 'vehicle_notes', ['vehicle_id'], unique=False)
    op.create_table('vehicle_registration',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for Vehicle Registration'),
    sa.Column('vehicle_id', sa.Integer(), nullable=False, comment='Foreign Key to Vehicle table'),
    sa.Column('registration_date', sa.Date(), nullable=False, comment='Date of registration'),
    sa.Column('registration_expiry_date', sa.Date(), nullable=False, comment='Expiry date of the registration'),
    sa.Column('registration_fee', sa.Float(), nullable=True, comment='Fee paid for the registration'),
    sa.Column('registration_state', sa.String(length=2), nullable=True, comment='Registration State'),
    sa.Column('registration_class', sa.String(length=2), nullable=True, comment='Registration Class'),
    sa.Column('plate_number', sa.String(length=255), nullable=True, comment='Vehicle plate number'),
    sa.Column('status', sa.String(length=50), nullable=False, comment='Registration Status'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('curb_trips',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('curb_trip_id', sa.String(length=255), nullable=False, comment='Unique identifier for the trip from CURB (e.g., ROWID).'),
    sa.Column('curb_period', sa.String(length=50), nullable=True, comment="The accounting period from CURB (e.g., '201903')."),
    sa.Column('status', sa.Enum('UNRECONCILED', 'RECONCILED', 'MAPPED', 'POSTED_TO_LEDGER', 'ERROR', name='curbtripstatus'), nullable=False, comment='The processing status of the trip within the BAT system.'),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('curb_driver_id', sa.String(length=100), nullable=False, comment='The raw driver identifier from CURB.'),
    sa.Column('curb_cab_number', sa.String(length=100), nullable=True, comment='The raw cab/medallion number from CURB.'),
    sa.Column('plate', sa.String(length=50), nullable=True, comment='Vehicle plate number, if available.'),
    sa.Column('start_time', sa.DateTime(timezone=True), nullable=False, comment='The start date and time of the trip.'),
    sa.Column('end_time', sa.DateTime(timezone=True), nullable=False, comment='The end date and time of the trip.'),
    sa.Column('fare', sa.Numeric(precision=10, scale=2), nullable=False, comment='Base fare amount.'),
    sa.Column('tips', sa.Numeric(precision=10, scale=2), nullable=False, comment='Tip amount.'),
    sa.Column('tolls', sa.Numeric(precision=10, scale=2), nullable=False, comment='Toll charges.'),
    sa.Column('extras', sa.Numeric(precision=10, scale=2), nullable=True, comment='Extra charges.'),
    sa.Column('total_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='Total amount charged for the trip.'),
    sa.Column('surcharge', sa.Numeric(precision=10, scale=2), nullable=True, comment='State Surcharge (TAX).'),
    sa.Column('improvement_surcharge', sa.Numeric(precision=10, scale=2), nullable=True, comment='Improvement Surcharge (IMPTAX / TIF).'),
    sa.Column('congestion_fee', sa.Numeric(precision=10, scale=2), nullable=True, comment='Congestion Fee (CongFee).'),
    sa.Column('airport_fee', sa.Numeric(precision=10, scale=2), nullable=True, comment='Airport Fee (airportFee).'),
    sa.Column('cbdt_fee', sa.Numeric(precision=10, scale=2), nullable=True, comment='Congestion Relief Zone Toll (cbdt).'),
    sa.Column('payment_type', sa.Enum('CASH', 'CREDIT_CARD', 'PRIVATE', 'UNKNOWN', name='paymenttype'), nullable=False, comment='Method of payment (Cash, Credit, etc.).'),
    sa.Column('reconciliation_id', sa.String(length=100), nullable=True, comment='The reconciliation identifier sent back to CURB.'),
    sa.Column('reconciled_at', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when the trip was reconciled.'),
    sa.Column('start_long', sa.Numeric(precision=10, scale=7), nullable=True, comment='Starting longitude of the trip.'),
    sa.Column('start_lat', sa.Numeric(precision=10, scale=7), nullable=True, comment='Starting latitude of the trip.'),
    sa.Column('end_long', sa.Numeric(precision=10, scale=7), nullable=True, comment='Ending longitude of the trip.'),
    sa.Column('end_lat', sa.Numeric(precision=10, scale=7), nullable=True, comment='Ending latitude of the trip.'),
    sa.Column('num_service', sa.Integer(), nullable=True, comment='Number of services during the trip.'),
    sa.Column('transaction_date', sa.DateTime(), nullable=True, comment='Date of the transaction.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_curb_trips_curb_cab_number'), 'curb_trips', ['curb_cab_number'], unique=False)
    op.create_index(op.f('ix_curb_trips_curb_driver_id'), 'curb_trips', ['curb_driver_id'], unique=False)
    op.create_index(op.f('ix_curb_trips_curb_trip_id'), 'curb_trips', ['curb_trip_id'], unique=True)
    op.create_index(op.f('ix_curb_trips_driver_id'), 'curb_trips', ['driver_id'], unique=False)
    op.create_index(op.f('ix_curb_trips_id'), 'curb_trips', ['id'], unique=False)
    op.create_index(op.f('ix_curb_trips_lease_id'), 'curb_trips', ['lease_id'], unique=False)
    op.create_index(op.f('ix_curb_trips_medallion_id'), 'curb_trips', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_curb_trips_reconciliation_id'), 'curb_trips', ['reconciliation_id'], unique=False)
    op.create_index(op.f('ix_curb_trips_status'), 'curb_trips', ['status'], unique=False)
    op.create_index(op.f('ix_curb_trips_vehicle_id'), 'curb_trips', ['vehicle_id'], unique=False)
    op.create_table('driver_loans',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('loan_id', sa.String(length=50), nullable=False, comment='System-generated unique ID for the loan (e.g., DLN-YYYY-###).'),
    sa.Column('driver_id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=False),
    sa.Column('medallion_id', sa.Integer(), nullable=False),
    sa.Column('principal_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The total principal amount of the loan.'),
    sa.Column('interest_rate', sa.Numeric(precision=5, scale=2), nullable=False, comment='Annual interest rate (e.g., 10.00 for 10%).'),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'OPEN', 'CLOSED', 'HOLD', 'CANCELLED', name='loanstatus'), nullable=False),
    sa.Column('start_week', sa.Date(), nullable=False, comment='The Sunday that marks the beginning of the first repayment period.'),
    sa.Column('loan_date', sa.Date(), nullable=False, comment='The date the loan was disbursed.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_driver_loans_driver_id'), 'driver_loans', ['driver_id'], unique=False)
    op.create_index(op.f('ix_driver_loans_id'), 'driver_loans', ['id'], unique=False)
    op.create_index(op.f('ix_driver_loans_lease_id'), 'driver_loans', ['lease_id'], unique=False)
    op.create_index(op.f('ix_driver_loans_loan_id'), 'driver_loans', ['loan_id'], unique=True)
    op.create_index(op.f('ix_driver_loans_medallion_id'), 'driver_loans', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_driver_loans_status'), 'driver_loans', ['status'], unique=False)
    op.create_table('dtrs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('dtr_number', sa.String(length=50), nullable=False, comment='Unique DTR number (BAT system generated)'),
    sa.Column('receipt_number', sa.String(length=50), nullable=False, comment='Receipt number for payment tracking'),
    sa.Column('period_start_date', sa.Date(), nullable=False, comment='Payment period start (Sunday 00:00)'),
    sa.Column('period_end_date', sa.Date(), nullable=False, comment='Payment period end (Saturday 23:59)'),
    sa.Column('generation_date', sa.DateTime(), nullable=False, comment='Date and time DTR was generated'),
    sa.Column('lease_id', sa.Integer(), nullable=False, comment='Foreign key to lease (ONE DTR PER LEASE)'),
    sa.Column('driver_id', sa.Integer(), nullable=False, comment='Primary driver (leaseholder) - for reference only'),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'PENDING', 'FINALIZED', 'PAID', 'VOIDED', name='dtrstatus'), nullable=False),
    sa.Column('gross_cc_earnings', sa.Numeric(precision=10, scale=2), nullable=False, comment='Total credit card earnings from CURB (ALL drivers consolidated)'),
    sa.Column('gross_cash_earnings', sa.Numeric(precision=10, scale=2), nullable=False, comment='Total cash earnings (if tracked)'),
    sa.Column('total_gross_earnings', sa.Numeric(precision=10, scale=2), nullable=False, comment='Total gross earnings (CC + Cash)'),
    sa.Column('lease_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='Weekly lease charge (primary driver only)'),
    sa.Column('mta_tif_fees', sa.Numeric(precision=10, scale=2), nullable=False, comment='MTA, TIF, Congestion, CBDT, Airport fees (ALL drivers)'),
    sa.Column('ezpass_tolls', sa.Numeric(precision=10, scale=2), nullable=False, comment='EZPass tolls (ALL drivers, outstanding as of period end)'),
    sa.Column('violation_tickets', sa.Numeric(precision=10, scale=2), nullable=False, comment='PVB violations (ALL drivers, outstanding as of period end)'),
    sa.Column('tlc_tickets', sa.Numeric(precision=10, scale=2), nullable=False, comment='TLC tickets (lease/medallion level only)'),
    sa.Column('repairs', sa.Numeric(precision=10, scale=2), nullable=False, comment='Repair charges for this period (primary driver only)'),
    sa.Column('driver_loans', sa.Numeric(precision=10, scale=2), nullable=False, comment='Loan installments due (primary driver only)'),
    sa.Column('misc_charges', sa.Numeric(precision=10, scale=2), nullable=False, comment='Miscellaneous charges (primary driver only)'),
    sa.Column('subtotal_deductions', sa.Numeric(precision=10, scale=2), nullable=False, comment='Sum of all deductions'),
    sa.Column('prior_balance', sa.Numeric(precision=10, scale=2), nullable=False, comment='Balance carried forward from previous period'),
    sa.Column('net_earnings', sa.Numeric(precision=10, scale=2), nullable=False, comment='Gross earnings - subtotal deductions - prior balance'),
    sa.Column('total_due_to_driver', sa.Numeric(precision=10, scale=2), nullable=False, comment='Final amount due to driver (max of 0 and net_earnings)'),
    sa.Column('payment_method', sa.Enum('ACH', 'CHECK', 'CASH', 'DIRECT_DEPOSIT', name='paymentmethod'), nullable=True),
    sa.Column('payment_date', sa.DateTime(), nullable=True),
    sa.Column('ach_batch_id', sa.Integer(), nullable=True),
    sa.Column('ach_batch_number', sa.String(length=20), nullable=True),
    sa.Column('check_number', sa.String(length=50), nullable=True),
    sa.Column('account_number_masked', sa.String(length=20), nullable=True, comment='Last 4 digits of bank account (for security)'),
    sa.Column('additional_drivers_detail', sa.JSON(), nullable=True, comment='Array of additional driver detail sections. Each entry contains:\n        {\n            "driver_id": int,\n            "driver_name": str,\n            "tlc_license": str,\n            "cc_earnings": decimal,\n            "taxes_charges": {...},\n            "ezpass_tolls": [...],\n            "pvb_violations": [...],\n            "trip_log": [...],\n            "alerts": {...}\n        }\n        '),
    sa.Column('tax_breakdown', sa.JSON(), nullable=True, comment='Detailed tax breakdown (Airport, CBDT, Congestion, MTA, TIF) - consolidated all drivers'),
    sa.Column('ezpass_detail', sa.JSON(), nullable=True, comment='EZPass transaction details - consolidated all drivers'),
    sa.Column('pvb_detail', sa.JSON(), nullable=True, comment='PVB violation details - consolidated all drivers'),
    sa.Column('tlc_detail', sa.JSON(), nullable=True, comment='TLC ticket details - lease level only'),
    sa.Column('repair_detail', sa.JSON(), nullable=True, comment='Repair invoice details - primary driver only'),
    sa.Column('loan_detail', sa.JSON(), nullable=True, comment='Loan installment details - primary driver only'),
    sa.Column('trip_log', sa.JSON(), nullable=True, comment='Credit card trip log from CURB - ALL drivers with TLC license identification'),
    sa.Column('alerts', sa.JSON(), nullable=True, comment='Vehicle and driver alerts (expiry dates, etc.) - includes all drivers'),
    sa.Column('notes', sa.Text(), nullable=True, comment='Additional notes or comments'),
    sa.Column('voided_reason', sa.Text(), nullable=True, comment='Reason if DTR was voided'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['ach_batch_id'], ['ach_batches.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('lease_id', 'period_start_date', name='uq_dtr_lease_period'),
    comment='Driver Transaction Receipts - ONE DTR PER LEASE PER PERIOD'
    )
    op.create_index(op.f('ix_dtrs_ach_batch_id'), 'dtrs', ['ach_batch_id'], unique=False)
    op.create_index(op.f('ix_dtrs_ach_batch_number'), 'dtrs', ['ach_batch_number'], unique=False)
    op.create_index(op.f('ix_dtrs_driver_id'), 'dtrs', ['driver_id'], unique=False)
    op.create_index(op.f('ix_dtrs_dtr_number'), 'dtrs', ['dtr_number'], unique=True)
    op.create_index(op.f('ix_dtrs_id'), 'dtrs', ['id'], unique=False)
    op.create_index(op.f('ix_dtrs_lease_id'), 'dtrs', ['lease_id'], unique=False)
    op.create_index(op.f('ix_dtrs_medallion_id'), 'dtrs', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_dtrs_period_end_date'), 'dtrs', ['period_end_date'], unique=False)
    op.create_index(op.f('ix_dtrs_period_start_date'), 'dtrs', ['period_start_date'], unique=False)
    op.create_index(op.f('ix_dtrs_receipt_number'), 'dtrs', ['receipt_number'], unique=True)
    op.create_index(op.f('ix_dtrs_status'), 'dtrs', ['status'], unique=False)
    op.create_index(op.f('ix_dtrs_vehicle_id'), 'dtrs', ['vehicle_id'], unique=False)
    op.create_table('ezpass_transactions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('import_id', sa.Integer(), nullable=False),
    sa.Column('transaction_id', sa.String(length=255), nullable=False, comment='Unique Lane Txn ID from the CSV.'),
    sa.Column('tag_or_plate', sa.String(length=100), nullable=False, comment='The tag or plate number from the CSV.'),
    sa.Column('agency', sa.String(length=100), nullable=False, comment='Tolling agency (e.g., MTAB&T).'),
    sa.Column('entry_plaza', sa.String(length=100), nullable=True),
    sa.Column('exit_plaza', sa.String(length=100), nullable=True),
    sa.Column('transaction_datetime', sa.DateTime(timezone=True), nullable=False, comment='The precise date and time of the toll transaction.'),
    sa.Column('amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The cost of the toll.'),
    sa.Column('med_from_csv', sa.String(length=50), nullable=True, comment="The 'MED' column from the CSV, stored for reference."),
    sa.Column('ezpass_class', sa.String(length=50), nullable=True, comment="The 'CLASS' column from the CSV, stored for reference."),
    sa.Column('status', sa.Enum('IMPORTED', 'ASSOCIATION_PENDING', 'ASSOCIATION_FAILED', 'ASSOCIATED', 'POSTING_PENDING', 'POSTING_FAILED', 'POSTED_TO_LEDGER', name='ezpasstransactionstatus'), nullable=False),
    sa.Column('failure_reason', sa.Text(), nullable=True, comment='Stores the reason for an association or posting failure.'),
    sa.Column('posting_date', sa.DateTime(timezone=True), nullable=True, comment='The date the transaction was posted to the ledger.'),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['import_id'], ['ezpass_imports.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ezpass_transactions_driver_id'), 'ezpass_transactions', ['driver_id'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_id'), 'ezpass_transactions', ['id'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_import_id'), 'ezpass_transactions', ['import_id'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_lease_id'), 'ezpass_transactions', ['lease_id'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_medallion_id'), 'ezpass_transactions', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_status'), 'ezpass_transactions', ['status'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_tag_or_plate'), 'ezpass_transactions', ['tag_or_plate'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_transaction_datetime'), 'ezpass_transactions', ['transaction_datetime'], unique=False)
    op.create_index(op.f('ix_ezpass_transactions_transaction_id'), 'ezpass_transactions', ['transaction_id'], unique=True)
    op.create_index(op.f('ix_ezpass_transactions_vehicle_id'), 'ezpass_transactions', ['vehicle_id'], unique=False)
    op.create_table('interim_payments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('payment_id', sa.String(length=50), nullable=False, comment='System-generated unique ID for the payment (e.g., INTPAY-[YYYY]-[#####]).'),
    sa.Column('case_no', sa.String(length=255), nullable=False, comment='Links to the BPM case used for creation.'),
    sa.Column('driver_id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=False),
    sa.Column('payment_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The total amount received from the driver.'),
    sa.Column('payment_method', sa.Enum('CASH', 'CHECK', 'ACH', name='paymentmethod'), nullable=False),
    sa.Column('notes', sa.String(length=255), nullable=True, comment='Optional notes from the cashier.'),
    sa.Column('allocations', sa.JSON(), nullable=True, comment='A JSON object detailing how the payment was allocated to different ledger balances.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_interim_payments_case_no'), 'interim_payments', ['case_no'], unique=False)
    op.create_index(op.f('ix_interim_payments_driver_id'), 'interim_payments', ['driver_id'], unique=False)
    op.create_index(op.f('ix_interim_payments_id'), 'interim_payments', ['id'], unique=False)
    op.create_index(op.f('ix_interim_payments_lease_id'), 'interim_payments', ['lease_id'], unique=False)
    op.create_index(op.f('ix_interim_payments_payment_id'), 'interim_payments', ['payment_id'], unique=True)
    op.create_table('lease_configuration',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('lease_breakup_type', sa.String(length=64), nullable=True, comment='Lease breakup type can one of MED, VEH, DAY, NGT, LT, SUN-D, SUN-N, MON-D, MON-N, TUE-D'),
    sa.Column('lease_limit', sa.String(length=64), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_configuration_id'), 'lease_configuration', ['id'], unique=False)
    op.create_table('lease_drivers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('driver_id', sa.String(length=128), nullable=True, comment='Foreign Key to driver.driver_id'),
    sa.Column('lease_id', sa.Integer(), nullable=True, comment='Foreign Key to lease Table'),
    sa.Column('driver_role', sa.String(length=10), nullable=True, comment='Driver role will include DL,NL, X,DX, NX'),
    sa.Column('is_day_night_shift', sa.Boolean(), nullable=True, comment='Is driver doing night shifts'),
    sa.Column('co_lease_seq', sa.CHAR(length=1), nullable=True, comment='Co Lease number in sequence'),
    sa.Column('date_added', sa.Date(), nullable=True, comment='Date lesee has been added'),
    sa.Column('date_terminated', sa.Date(), nullable=True, comment='Date lesee has been terminated'),
    sa.Column('is_additional_driver', sa.Boolean(), nullable=True, comment='Flag indicating if this is an additional driver'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.driver_id'], onupdate='CASCADE'),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_drivers_driver_id'), 'lease_drivers', ['driver_id'], unique=False)
    op.create_index(op.f('ix_lease_drivers_id'), 'lease_drivers', ['id'], unique=False)
    op.create_table('lease_notes',
    sa.Column('id', sa.Integer(), nullable=False, comment='Primary Key for LeaseNote'),
    sa.Column('lease_id', sa.Integer(), nullable=False, comment='Foreign Key to Lease Table'),
    sa.Column('note_id', sa.Integer(), nullable=False, comment='Foreign Key to Note Table'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['note_id'], ['notes.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_notes_lease_id'), 'lease_notes', ['lease_id'], unique=False)
    op.create_index(op.f('ix_lease_notes_note_id'), 'lease_notes', ['note_id'], unique=False)
    op.create_table('lease_schedule',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('installment_number', sa.Integer(), nullable=True),
    sa.Column('installment_due_date', sa.Date(), nullable=True),
    sa.Column('installment_amount', sa.Float(), nullable=True),
    sa.Column('period_start_date', sa.Date(), nullable=True, comment='Start date of the period covered by this installment'),
    sa.Column('period_end_date', sa.Date(), nullable=True, comment='End date of the period covered by this installment'),
    sa.Column('medallion_installment_amount', sa.Float(), nullable=True, comment='Medallion portion of installment'),
    sa.Column('vehicle_installment_amount', sa.Float(), nullable=True, comment='Vehicle portion of installment'),
    sa.Column('installment_status', sa.CHAR(length=2), nullable=True, comment='D, P, OD, C'),
    sa.Column('installment_paid_date', sa.Date(), nullable=True, comment='Date when the installment is paid'),
    sa.Column('dtr_number', sa.CHAR(length=24), nullable=True, comment='DTR Number'),
    sa.Column('remarks', sa.String(length=255), nullable=True, comment='Comment against the installment'),
    sa.Column('posted_to_ledger', sa.Integer(), nullable=True, comment='0 = not posted, 1 = posted to ledger'),
    sa.Column('posted_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when posted to ledger'),
    sa.Column('ledger_posting_id', sa.String(length=50), nullable=True, comment='Reference to ledger posting'),
    sa.Column('ledger_balance_id', sa.String(length=50), nullable=True, comment='Reference to ledger balance'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_schedule_id'), 'lease_schedule', ['id'], unique=False)
    op.create_table('ledger_balances',
    sa.Column('id', sa.String(length=36), nullable=False),
    sa.Column('category', sa.Enum('LEASE', 'REPAIR', 'LOAN', 'EZPASS', 'PVB', 'TLC', 'TAXES', 'MISC', 'EARNINGS', 'INTERIM_PAYMENT', 'DEPOSIT', 'CANCELLATION_FEE', name='postingcategory'), nullable=False),
    sa.Column('reference_id', sa.String(length=255), nullable=False, comment='Traceability ID to the source obligation (e.g., RepairInvoice ID, Loan ID)'),
    sa.Column('original_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The immutable initial obligation amount'),
    sa.Column('prior_balance', sa.Numeric(precision=10, scale=2), nullable=False, comment='Carried over unpaid portion from previous DTR cycle'),
    sa.Column('balance', sa.Numeric(precision=10, scale=2), nullable=False, comment='The current remaining unpaid portion of the obligation'),
    sa.Column('status', sa.Enum('OPEN', 'CLOSED', name='balancestatus'), nullable=False),
    sa.Column('applied_payment_refs', sa.JSON(), nullable=True, comment='Stores a list of Posting_IDs for payments/earnings applied to this balance'),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('vin', sa.String(length=64), nullable=True, comment='Denormalized for filtering/reconciliation'),
    sa.Column('plate', sa.String(length=255), nullable=True, comment='Denormalized for filtering/reconciliation'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ledger_balances_category'), 'ledger_balances', ['category'], unique=False)
    op.create_index(op.f('ix_ledger_balances_driver_id'), 'ledger_balances', ['driver_id'], unique=False)
    op.create_index(op.f('ix_ledger_balances_lease_id'), 'ledger_balances', ['lease_id'], unique=False)
    op.create_index(op.f('ix_ledger_balances_medallion_id'), 'ledger_balances', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_ledger_balances_reference_id'), 'ledger_balances', ['reference_id'], unique=False)
    op.create_index(op.f('ix_ledger_balances_vehicle_id'), 'ledger_balances', ['vehicle_id'], unique=False)
    op.create_table('ledger_postings',
    sa.Column('id', sa.String(length=36), nullable=False),
    sa.Column('category', sa.Enum('LEASE', 'REPAIR', 'LOAN', 'EZPASS', 'PVB', 'TLC', 'TAXES', 'MISC', 'EARNINGS', 'INTERIM_PAYMENT', 'DEPOSIT', 'CANCELLATION_FEE', name='postingcategory'), nullable=False),
    sa.Column('amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='Positive for debit (obligation), Negative for credit (earning/payment)'),
    sa.Column('entry_type', sa.Enum('DEBIT', 'CREDIT', name='entrytype'), nullable=False),
    sa.Column('status', sa.Enum('POSTED', 'VOIDED', name='postingstatus'), nullable=False),
    sa.Column('reference_id', sa.String(length=255), nullable=False, comment='Traceability ID to the source record (e.g., LeaseSchedule ID, RepairInvoice ID)'),
    sa.Column('reversal_for_id', sa.String(length=36), nullable=True, comment='If this is a reversal, points to the original posting ID'),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('vin', sa.String(length=64), nullable=True, comment='Denormalized for filtering/reconciliation'),
    sa.Column('plate', sa.String(length=255), nullable=True, comment='Denormalized for filtering/reconciliation'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['reversal_for_id'], ['ledger_postings.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ledger_postings_category'), 'ledger_postings', ['category'], unique=False)
    op.create_index(op.f('ix_ledger_postings_driver_id'), 'ledger_postings', ['driver_id'], unique=False)
    op.create_index(op.f('ix_ledger_postings_lease_id'), 'ledger_postings', ['lease_id'], unique=False)
    op.create_index(op.f('ix_ledger_postings_medallion_id'), 'ledger_postings', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_ledger_postings_reference_id'), 'ledger_postings', ['reference_id'], unique=False)
    op.create_index(op.f('ix_ledger_postings_vehicle_id'), 'ledger_postings', ['vehicle_id'], unique=False)
    op.create_table('miscellaneous_expenses',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('expense_id', sa.String(length=50), nullable=False, comment='System-generated unique ID (e.g., MISC-YYYY-#####).'),
    sa.Column('case_no', sa.String(length=255), nullable=False, comment='Links to the BPM case used for creation.'),
    sa.Column('driver_id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('medallion_id', sa.Integer(), nullable=False),
    sa.Column('expense_date', sa.Date(), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=False, comment='Dropdown category (e.g., Lost Key, Cleaning Fee).'),
    sa.Column('reference_number', sa.String(length=255), nullable=True, comment='Optional user-entered reference.'),
    sa.Column('amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The total amount of the charge.'),
    sa.Column('notes', sa.Text(), nullable=True, comment='Optional free-text notes for details.'),
    sa.Column('status', sa.Enum('OPEN', 'RECOVERED', 'VOIDED', name='miscellaneousexpensestatus'), nullable=False),
    sa.Column('ledger_posting_ref', sa.String(length=255), nullable=False, comment='Reference to the LedgerPosting ID created upon save.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_miscellaneous_expenses_case_no'), 'miscellaneous_expenses', ['case_no'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_driver_id'), 'miscellaneous_expenses', ['driver_id'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_expense_id'), 'miscellaneous_expenses', ['expense_id'], unique=True)
    op.create_index(op.f('ix_miscellaneous_expenses_id'), 'miscellaneous_expenses', ['id'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_lease_id'), 'miscellaneous_expenses', ['lease_id'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_medallion_id'), 'miscellaneous_expenses', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_status'), 'miscellaneous_expenses', ['status'], unique=False)
    op.create_index(op.f('ix_miscellaneous_expenses_vehicle_id'), 'miscellaneous_expenses', ['vehicle_id'], unique=False)
    op.create_table('pvb_violations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('import_id', sa.Integer(), nullable=True),
    sa.Column('source', sa.Enum('CSV_IMPORT', 'MANUAL_ENTRY', name='pvbsource'), nullable=False),
    sa.Column('case_no', sa.String(length=255), nullable=True, comment='Links to the BPM case if created manually.'),
    sa.Column('plate', sa.String(length=50), nullable=False),
    sa.Column('state', sa.String(length=10), nullable=False),
    sa.Column('type', sa.String(length=50), nullable=False),
    sa.Column('summons', sa.String(length=255), nullable=False),
    sa.Column('issue_date', sa.Date(), nullable=False),
    sa.Column('issue_time', sa.Time(), nullable=True),
    sa.Column('fine', sa.Numeric(precision=10, scale=2), nullable=False),
    sa.Column('penalty', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('interest', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('reduction', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('amount_due', sa.Numeric(precision=10, scale=2), nullable=False),
    sa.Column('status', sa.Enum('IMPORTED', 'ASSOCIATION_PENDING', 'ASSOCIATION_FAILED', 'ASSOCIATED', 'POSTING_PENDING', 'POSTING_FAILED', 'POSTED_TO_LEDGER', name='pvbviolationstatus'), nullable=False),
    sa.Column('failure_reason', sa.Text(), nullable=True),
    sa.Column('posting_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('vehicle_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=True),
    sa.Column('lease_id', sa.Integer(), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['import_id'], ['pvb_imports.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_pvb_violations_case_no'), 'pvb_violations', ['case_no'], unique=False)
    op.create_index(op.f('ix_pvb_violations_driver_id'), 'pvb_violations', ['driver_id'], unique=False)
    op.create_index(op.f('ix_pvb_violations_id'), 'pvb_violations', ['id'], unique=False)
    op.create_index(op.f('ix_pvb_violations_import_id'), 'pvb_violations', ['import_id'], unique=False)
    op.create_index(op.f('ix_pvb_violations_lease_id'), 'pvb_violations', ['lease_id'], unique=False)
    op.create_index(op.f('ix_pvb_violations_medallion_id'), 'pvb_violations', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_pvb_violations_plate'), 'pvb_violations', ['plate'], unique=False)
    op.create_index(op.f('ix_pvb_violations_source'), 'pvb_violations', ['source'], unique=False)
    op.create_index(op.f('ix_pvb_violations_status'), 'pvb_violations', ['status'], unique=False)
    op.create_index(op.f('ix_pvb_violations_summons'), 'pvb_violations', ['summons'], unique=True)
    op.create_index(op.f('ix_pvb_violations_vehicle_id'), 'pvb_violations', ['vehicle_id'], unique=False)
    op.create_table('repair_invoices',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('repair_id', sa.String(length=50), nullable=False, comment='System-generated unique internal ID for the repair (e.g., RPR-YYYY-#####).'),
    sa.Column('invoice_number', sa.String(length=255), nullable=False, comment='Actual invoice number from the workshop.'),
    sa.Column('invoice_date', sa.Date(), nullable=False),
    sa.Column('driver_id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('medallion_id', sa.Integer(), nullable=False),
    sa.Column('workshop_type', sa.Enum('BIG_APPLE', 'EXTERNAL', name='workshoptype'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('total_amount', sa.Numeric(precision=10, scale=2), nullable=False),
    sa.Column('status', sa.Enum('DRAFT', 'OPEN', 'CLOSED', 'HOLD', 'CANCELLED', name='repairinvoicestatus'), nullable=False),
    sa.Column('start_week', sa.Date(), nullable=False, comment='The Sunday that marks the beginning of the first payment period.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['vehicle_id'], ['vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_repair_invoices_driver_id'), 'repair_invoices', ['driver_id'], unique=False)
    op.create_index(op.f('ix_repair_invoices_id'), 'repair_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_repair_invoices_invoice_number'), 'repair_invoices', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_repair_invoices_lease_id'), 'repair_invoices', ['lease_id'], unique=False)
    op.create_index(op.f('ix_repair_invoices_medallion_id'), 'repair_invoices', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_repair_invoices_repair_id'), 'repair_invoices', ['repair_id'], unique=True)
    op.create_index(op.f('ix_repair_invoices_status'), 'repair_invoices', ['status'], unique=False)
    op.create_index(op.f('ix_repair_invoices_vehicle_id'), 'repair_invoices', ['vehicle_id'], unique=False)
    op.create_table('tlc_violations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('case_no', sa.String(length=255), nullable=False, comment='Links to the BPM case used for creation.'),
    sa.Column('summons_no', sa.String(length=255), nullable=False),
    sa.Column('issue_date', sa.Date(), nullable=False),
    sa.Column('issue_time', sa.Time(), nullable=True),
    sa.Column('violation_type', sa.Enum('FI', 'FN', 'RF', name='tlcviolationtype'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True, comment='Required only if type is FN.'),
    sa.Column('amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='Base ticket amount.'),
    sa.Column('service_fee', sa.Numeric(precision=10, scale=2), nullable=False),
    sa.Column('total_payable', sa.Numeric(precision=10, scale=2), nullable=False, comment='Calculated as Amount + Service Fee.'),
    sa.Column('disposition', sa.Enum('PAID', 'REDUCED', 'DISMISSED', name='tlcdisposition'), nullable=False),
    sa.Column('driver_id', sa.Integer(), nullable=True),
    sa.Column('medallion_id', sa.Integer(), nullable=False),
    sa.Column('lease_id', sa.Integer(), nullable=False),
    sa.Column('attachment_document_id', sa.Integer(), nullable=False, comment='FK to the uploaded ticket scan.'),
    sa.Column('status', sa.Enum('PENDING', 'POSTED', 'REVERSED', name='tlcviolationstatus'), nullable=False),
    sa.Column('original_posting_id', sa.String(length=255), nullable=True, comment='Reference to the initial ledger posting.'),
    sa.Column('reversal_posting_id', sa.String(length=255), nullable=True, comment='Reference to the reversal posting if disposition is changed.'),
    sa.Column('plate', sa.String(length=50), nullable=False, comment='License plate number of the vehicle.'),
    sa.Column('state', sa.String(length=10), nullable=False, comment='State of the license plate.'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['attachment_document_id'], ['document.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['driver_id'], ['drivers.id'], ),
    sa.ForeignKeyConstraint(['lease_id'], ['leases.id'], ),
    sa.ForeignKeyConstraint(['medallion_id'], ['medallions.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_tlc_violations_case_no'), 'tlc_violations', ['case_no'], unique=False)
    op.create_index(op.f('ix_tlc_violations_driver_id'), 'tlc_violations', ['driver_id'], unique=False)
    op.create_index(op.f('ix_tlc_violations_id'), 'tlc_violations', ['id'], unique=False)
    op.create_index(op.f('ix_tlc_violations_lease_id'), 'tlc_violations', ['lease_id'], unique=False)
    op.create_index(op.f('ix_tlc_violations_medallion_id'), 'tlc_violations', ['medallion_id'], unique=False)
    op.create_index(op.f('ix_tlc_violations_summons_no'), 'tlc_violations', ['summons_no'], unique=True)
    op.create_table('lease_driver_documents',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('lease_driver_id', sa.Integer(), nullable=False, comment='Foreign Key to Lease Driver Table'),
    sa.Column('document_envelope_id', sa.String(length=120), nullable=True, comment='Document envelope id that is present in DocuSign'),
    sa.Column('has_frontend_signed', sa.Boolean(), nullable=True),
    sa.Column('frontend_signed_date', sa.Date(), nullable=True),
    sa.Column('has_driver_signed', sa.Boolean(), nullable=True),
    sa.Column('driver_signed_date', sa.Date(), nullable=True),
    sa.Column('document_id', sa.Integer(), nullable=True, comment='Associated document ID'),
    sa.Column('signing_type', sa.String(length=32), nullable=True, comment='Signature mode (free text)'),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['lease_driver_id'], ['lease_drivers.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lease_driver_documents_document_id'), 'lease_driver_documents', ['document_id'], unique=False)
    op.create_index(op.f('ix_lease_driver_documents_id'), 'lease_driver_documents', ['id'], unique=False)
    op.create_table('loan_installments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('loan_id', sa.Integer(), nullable=False),
    sa.Column('installment_id', sa.String(length=60), nullable=False, comment='Unique ID for the installment (e.g., DLN-YYYY-###-01).'),
    sa.Column('week_start_date', sa.Date(), nullable=False),
    sa.Column('week_end_date', sa.Date(), nullable=False),
    sa.Column('principal_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The principal portion of this installment.'),
    sa.Column('interest_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='The calculated interest portion for this period.'),
    sa.Column('total_due', sa.Numeric(precision=10, scale=2), nullable=False, comment='Total amount due for this installment (Principal + Interest).'),
    sa.Column('status', sa.Enum('SCHEDULED', 'DUE', 'POSTED', 'PAID', name='loaninstallmentstatus'), nullable=False),
    sa.Column('ledger_posting_ref', sa.String(length=255), nullable=True, comment='Reference to the LedgerPosting ID.'),
    sa.Column('posted_on', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['loan_id'], ['driver_loans.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_loan_installments_id'), 'loan_installments', ['id'], unique=False)
    op.create_index(op.f('ix_loan_installments_installment_id'), 'loan_installments', ['installment_id'], unique=True)
    op.create_index(op.f('ix_loan_installments_loan_id'), 'loan_installments', ['loan_id'], unique=False)
    op.create_index(op.f('ix_loan_installments_status'), 'loan_installments', ['status'], unique=False)
    op.create_table('repair_installments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('invoice_id', sa.Integer(), nullable=False),
    sa.Column('installment_id', sa.String(length=60), nullable=False, comment='Unique ID for the installment (e.g., RPR-YYYY-#####-01).'),
    sa.Column('week_start_date', sa.Date(), nullable=False),
    sa.Column('week_end_date', sa.Date(), nullable=False),
    sa.Column('principal_amount', sa.Numeric(precision=10, scale=2), nullable=False, comment='Portion of the installment that reduces the principal loan balance.'),
    sa.Column('status', sa.Enum('SCHEDULED', 'DUE', 'POSTED', 'PAID', name='repairinstallmentstatus'), nullable=False),
    sa.Column('ledger_posting_ref', sa.String(length=255), nullable=True, comment='Reference to the LedgerPosting ID once created.'),
    sa.Column('posted_on', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_archived', sa.Boolean(), nullable=True, comment='Flag indicating if the record is archived'),
    sa.Column('is_active', sa.Boolean(), nullable=True, comment='Flag to keep track of record is active or not'),
    sa.Column('created_by', sa.Integer(), nullable=True, comment='User who created this record'),
    sa.Column('modified_by', sa.Integer(), nullable=True, comment='User who last modified this record'),
    sa.Column('created_on', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True, comment='Timestamp when this record was created'),
    sa.Column('updated_on', sa.DateTime(timezone=True), nullable=True, comment='Timestamp when this record was last updated'),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.ForeignKeyConstraint(['invoice_id'], ['repair_invoices.id'], ),
    sa.ForeignKeyConstraint(['modified_by'], ['users.id'], onupdate='CASCADE', ondelete='SET NULL'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_repair_installments_id'), 'repair_installments', ['id'], unique=False)
    op.create_index(op.f('ix_repair_installments_installment_id'), 'repair_installments', ['installment_id'], unique=True)
    op.create_index(op.f('ix_repair_installments_invoice_id'), 'repair_installments', ['invoice_id'], unique=False)
    op.create_index(op.f('ix_repair_installments_status'), 'repair_installments', ['status'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_repair_installments_status'), table_name='repair_installments')
    op.drop_index(op.f('ix_repair_installments_invoice_id'), table_name='repair_installments')
    op.drop_index(op.f('ix_repair_installments_installment_id'), table_name='repair_installments')
    op.drop_index(op.f('ix_repair_installments_id'), table_name='repair_installments')
    op.drop_table('repair_installments')
    op.drop_index(op.f('ix_loan_installments_status'), table_name='loan_installments')
    op.drop_index(op.f('ix_loan_installments_loan_id'), table_name='loan_installments')
    op.drop_index(op.f('ix_loan_installments_installment_id'), table_name='loan_installments')
    op.drop_index(op.f('ix_loan_installments_id'), table_name='loan_installments')
    op.drop_table('loan_installments')
    op.drop_index(op.f('ix_lease_driver_documents_id'), table_name='lease_driver_documents')
    op.drop_index(op.f('ix_lease_driver_documents_document_id'), table_name='lease_driver_documents')
    op.drop_table('lease_driver_documents')
    op.drop_index(op.f('ix_tlc_violations_summons_no'), table_name='tlc_violations')
    op.drop_index(op.f('ix_tlc_violations_medallion_id'), table_name='tlc_violations')
    op.drop_index(op.f('ix_tlc_violations_lease_id'), table_name='tlc_violations')
    op.drop_index(op.f('ix_tlc_violations_id'), table_name='tlc_violations')
    op.drop_index(op.f('ix_tlc_violations_driver_id'), table_name='tlc_violations')
    op.drop_index(op.f('ix_tlc_violations_case_no'), table_name='tlc_violations')
    op.drop_table('tlc_violations')
    op.drop_index(op.f('ix_repair_invoices_vehicle_id'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_status'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_repair_id'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_medallion_id'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_lease_id'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_invoice_number'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_id'), table_name='repair_invoices')
    op.drop_index(op.f('ix_repair_invoices_driver_id'), table_name='repair_invoices')
    op.drop_table('repair_invoices')
    op.drop_index(op.f('ix_pvb_violations_vehicle_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_summons'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_status'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_source'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_plate'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_medallion_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_lease_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_import_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_driver_id'), table_name='pvb_violations')
    op.drop_index(op.f('ix_pvb_violations_case_no'), table_name='pvb_violations')
    op.drop_table('pvb_violations')
    op.drop_index(op.f('ix_miscellaneous_expenses_vehicle_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_status'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_medallion_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_lease_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_expense_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_driver_id'), table_name='miscellaneous_expenses')
    op.drop_index(op.f('ix_miscellaneous_expenses_case_no'), table_name='miscellaneous_expenses')
    op.drop_table('miscellaneous_expenses')
    op.drop_index(op.f('ix_ledger_postings_vehicle_id'), table_name='ledger_postings')
    op.drop_index(op.f('ix_ledger_postings_reference_id'), table_name='ledger_postings')
    op.drop_index(op.f('ix_ledger_postings_medallion_id'), table_name='ledger_postings')
    op.drop_index(op.f('ix_ledger_postings_lease_id'), table_name='ledger_postings')
    op.drop_index(op.f('ix_ledger_postings_driver_id'), table_name='ledger_postings')
    op.drop_index(op.f('ix_ledger_postings_category'), table_name='ledger_postings')
    op.drop_table('ledger_postings')
    op.drop_index(op.f('ix_ledger_balances_vehicle_id'), table_name='ledger_balances')
    op.drop_index(op.f('ix_ledger_balances_reference_id'), table_name='ledger_balances')
    op.drop_index(op.f('ix_ledger_balances_medallion_id'), table_name='ledger_balances')
    op.drop_index(op.f('ix_ledger_balances_lease_id'), table_name='ledger_balances')
    op.drop_index(op.f('ix_ledger_balances_driver_id'), table_name='ledger_balances')
    op.drop_index(op.f('ix_ledger_balances_category'), table_name='ledger_balances')
    op.drop_table('ledger_balances')
    op.drop_index(op.f('ix_lease_schedule_id'), table_name='lease_schedule')
    op.drop_table('lease_schedule')
    op.drop_index(op.f('ix_lease_notes_note_id'), table_name='lease_notes')
    op.drop_index(op.f('ix_lease_notes_lease_id'), table_name='lease_notes')
    op.drop_table('lease_notes')
    op.drop_index(op.f('ix_lease_drivers_id'), table_name='lease_drivers')
    op.drop_index(op.f('ix_lease_drivers_driver_id'), table_name='lease_drivers')
    op.drop_table('lease_drivers')
    op.drop_index(op.f('ix_lease_configuration_id'), table_name='lease_configuration')
    op.drop_table('lease_configuration')
    op.drop_index(op.f('ix_interim_payments_payment_id'), table_name='interim_payments')
    op.drop_index(op.f('ix_interim_payments_lease_id'), table_name='interim_payments')
    op.drop_index(op.f('ix_interim_payments_id'), table_name='interim_payments')
    op.drop_index(op.f('ix_interim_payments_driver_id'), table_name='interim_payments')
    op.drop_index(op.f('ix_interim_payments_case_no'), table_name='interim_payments')
    op.drop_table('interim_payments')
    op.drop_index(op.f('ix_ezpass_transactions_vehicle_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_transaction_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_transaction_datetime'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_tag_or_plate'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_status'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_medallion_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_lease_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_import_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_id'), table_name='ezpass_transactions')
    op.drop_index(op.f('ix_ezpass_transactions_driver_id'), table_name='ezpass_transactions')
    op.drop_table('ezpass_transactions')
    op.drop_index(op.f('ix_dtrs_vehicle_id'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_status'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_receipt_number'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_period_start_date'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_period_end_date'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_medallion_id'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_lease_id'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_id'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_dtr_number'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_driver_id'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_ach_batch_number'), table_name='dtrs')
    op.drop_index(op.f('ix_dtrs_ach_batch_id'), table_name='dtrs')
    op.drop_table('dtrs')
    op.drop_index(op.f('ix_driver_loans_status'), table_name='driver_loans')
    op.drop_index(op.f('ix_driver_loans_medallion_id'), table_name='driver_loans')
    op.drop_index(op.f('ix_driver_loans_loan_id'), table_name='driver_loans')
    op.drop_index(op.f('ix_driver_loans_lease_id'), table_name='driver_loans')
    op.drop_index(op.f('ix_driver_loans_id'), table_name='driver_loans')
    op.drop_index(op.f('ix_driver_loans_driver_id'), table_name='driver_loans')
    op.drop_table('driver_loans')
    op.drop_index(op.f('ix_curb_trips_vehicle_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_status'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_reconciliation_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_medallion_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_lease_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_driver_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_curb_trip_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_curb_driver_id'), table_name='curb_trips')
    op.drop_index(op.f('ix_curb_trips_curb_cab_number'), table_name='curb_trips')
    op.drop_table('curb_trips')
    op.drop_table('vehicle_registration')
    op.drop_index(op.f('ix_vehicle_notes_vehicle_id'), table_name='vehicle_notes')
    op.drop_index(op.f('ix_vehicle_notes_note_id'), table_name='vehicle_notes')
    op.drop_table('vehicle_notes')
    op.drop_table('vehicle_inspections')
    op.drop_table('vehicle_hackups')
    op.drop_table('vehicle_expenses_and_compliance')
    op.drop_index(op.f('ix_leases_id'), table_name='leases')
    op.drop_table('leases')
    op.drop_table('vehicles')
    op.drop_index(op.f('ix_medallion_notes_note_id'), table_name='medallion_notes')
    op.drop_index(op.f('ix_medallion_notes_medallion_id'), table_name='medallion_notes')
    op.drop_table('medallion_notes')
    op.drop_index(op.f('ix_audit_trail_id'), table_name='audit_trail')
    op.drop_table('audit_trail')
    op.drop_table('medallions')
    op.drop_index(op.f('ix_cases_id'), table_name='cases')
    op.drop_table('cases')
    op.drop_index(op.f('ix_slas_name'), table_name='slas')
    op.drop_index(op.f('ix_slas_id'), table_name='slas')
    op.drop_table('slas')
    op.drop_table('medallion_owners')
    op.drop_index(op.f('ix_entity_entity_address_id'), table_name='entity')
    op.drop_table('entity')
    op.drop_index(op.f('ix_driver_notes_note_id'), table_name='driver_notes')
    op.drop_index(op.f('ix_driver_notes_driver_id'), table_name='driver_notes')
    op.drop_table('driver_notes')
    op.drop_table('corporation_payees')
    op.drop_index(op.f('ix_corporation_owners_corporation_id'), table_name='corporation_owners')
    op.drop_table('corporation_owners')
    op.drop_index(op.f('ix_case_type_first_steps_id'), table_name='case_type_first_steps')
    op.drop_table('case_type_first_steps')
    op.drop_table('case_step_config_role')
    op.drop_index(op.f('ix_case_step_config_paths_id'), table_name='case_step_config_paths')
    op.drop_table('case_step_config_paths')
    op.drop_table('mo_leases')
    op.drop_index(op.f('ix_individual_secondary_address_id'), table_name='individual')
    op.drop_index(op.f('ix_individual_primary_address_id'), table_name='individual')
    op.drop_table('individual')
    op.drop_index(op.f('ix_drivers_tlc_license_number_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_secondary_address_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_primary_address_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_driver_manager_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_driver_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_dmv_license_number_id'), table_name='drivers')
    op.drop_index(op.f('ix_drivers_bank_account_id'), table_name='drivers')
    op.drop_table('drivers')
    op.drop_index(op.f('ix_case_step_configs_step_name'), table_name='case_step_configs')
    op.drop_index(op.f('ix_case_step_configs_step_id'), table_name='case_step_configs')
    op.drop_index(op.f('ix_case_step_configs_id'), table_name='case_step_configs')
    op.drop_table('case_step_configs')
    op.drop_table('case_reassignment_roles_at_assignment')
    op.drop_table('case_reassignment_assigned_by_roles')
    op.drop_table('vehicle_entity')
    op.drop_table('users_and_roles')
    op.drop_index(op.f('ix_shared_queries_id'), table_name='shared_queries')
    op.drop_table('shared_queries')
    op.drop_index(op.f('ix_corporation_secondary_address_id'), table_name='corporation')
    op.drop_index(op.f('ix_corporation_primary_address_id'), table_name='corporation')
    op.drop_table('corporation')
    op.drop_index(op.f('ix_case_steps_name'), table_name='case_steps')
    op.drop_index(op.f('ix_case_steps_id'), table_name='case_steps')
    op.drop_table('case_steps')
    op.drop_index(op.f('ix_case_reassignments_step_id'), table_name='case_reassignments')
    op.drop_index(op.f('ix_case_reassignments_id'), table_name='case_reassignments')
    op.drop_table('case_reassignments')
    op.drop_table('bank_account')
    op.drop_index(op.f('ix_roles_id'), table_name='roles')
    op.drop_table('roles')
    op.drop_index(op.f('ix_query_records_id'), table_name='query_records')
    op.drop_table('query_records')
    op.drop_index(op.f('ix_pvb_imports_status'), table_name='pvb_imports')
    op.drop_index(op.f('ix_pvb_imports_id'), table_name='pvb_imports')
    op.drop_table('pvb_imports')
    op.drop_table('notes')
    op.drop_table('medallion_storage')
    op.drop_table('medallion_renewals')
    op.drop_index(op.f('ix_lease_presets_lease_type'), table_name='lease_presets')
    op.drop_index(op.f('ix_lease_presets_id'), table_name='lease_presets')
    op.drop_table('lease_presets')
    op.drop_index(op.f('ix_lease_payment_configuration_id'), table_name='lease_payment_configuration')
    op.drop_table('lease_payment_configuration')
    op.drop_table('hackup_tasks')
    op.drop_index(op.f('ix_ezpass_imports_status'), table_name='ezpass_imports')
    op.drop_index(op.f('ix_ezpass_imports_id'), table_name='ezpass_imports')
    op.drop_table('ezpass_imports')
    op.drop_index(op.f('ix_esign_envelopes_id'), table_name='esign_envelopes')
    op.drop_index(op.f('ix_esign_envelopes_envelope_id'), table_name='esign_envelopes')
    op.drop_table('esign_envelopes')
    op.drop_table('driver_tlc_license')
    op.drop_table('driver_dmv_license')
    op.drop_table('document')
    op.drop_table('dealers')
    op.drop_table('company_bank_configuration')
    op.drop_index(op.f('ix_case_types_prefix'), table_name='case_types')
    op.drop_index(op.f('ix_case_types_name'), table_name='case_types')
    op.drop_index(op.f('ix_case_types_id'), table_name='case_types')
    op.drop_table('case_types')
    op.drop_index(op.f('ix_case_statuses_name'), table_name='case_statuses')
    op.drop_index(op.f('ix_case_statuses_id'), table_name='case_statuses')
    op.drop_table('case_statuses')
    op.drop_index(op.f('ix_case_entities_id'), table_name='case_entities')
    op.drop_table('case_entities')
    op.drop_table('address')
    op.drop_index(op.f('ix_ach_batches_status'), table_name='ach_batches')
    op.drop_index(op.f('ix_ach_batches_is_reversed'), table_name='ach_batches')
    op.drop_index(op.f('ix_ach_batches_batch_number'), table_name='ach_batches')
    op.drop_table('ach_batches')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_table('users')
    # ### end Alembic commands ###
