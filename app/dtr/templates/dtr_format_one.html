<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTR - {{ dtr_number }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 10px;
            line-height: 1.2;
            color: #000;
        }

        .page {
            width: 8.5in;
            min-height: 11in;
            padding: 0;
            margin: 0 auto;
            background: white;
            position: relative;
        }

        /* Yellow Header */
        .header {
            background-color: #F7B500;
            padding: 18px 40px;
            display: table;
            width: 100%;
        }

        .header-content {
            display: table;
            width: 100%;
        }

        .logo {
            display: table-cell;
            vertical-align: middle;
            width: 80px;
        }

        .logo img {
            width: 60px;
            height: 60px;
        }

        .company-info {
            display: table-cell;
            vertical-align: middle;
            padding-left: 15px;
        }

        .company-info h1 {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 3px;
            color: #000;
        }

        .company-info p {
            font-size: 9px;
            margin: 0;
            color: #000;
        }

        /* Content Area */
        .content {
            padding: 20px 40px;
        }

        /* Basic Info Grid - 2x3 layout */
        .info-grid {
            width: 100%;
            margin-bottom: 25px;
            border-collapse: collapse;
        }

        .info-grid tr {
            height: 22px;
        }

        .info-grid td {
            padding: 3px 0;
            font-size: 10px;
        }

        .info-grid td:nth-child(1),
        .info-grid td:nth-child(3) {
            width: 25%;
            font-weight: normal;
        }

        .info-grid td:nth-child(2),
        .info-grid td:nth-child(4) {
            width: 25%;
            font-weight: normal;
        }

        .info-label {
            display: inline-block;
            min-width: 150px;
        }

        /* Section Headers with Red Border */
        .section-title {
            font-size: 12px;
            font-weight: bold;
            padding-left: 12px;
            border-left: 4px solid #D32F2F;
            margin: 20px 0 12px 0;
            color: #000;
        }

        /* Tables */
        table.data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 10px;
        }

        table.data-table th {
            background-color: #E0E0E0;
            padding: 8px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #999;
        }

        table.data-table th.amount-cell {
            text-align: right;
            width: 120px;
        }

        table.data-table td {
            padding: 6px 8px;
            border: 1px solid #999;
            vertical-align: top;
        }

        table.data-table td.amount-cell {
            text-align: right;
        }

        table.data-table tr.total-row {
            background-color: #F5F5F5;
            font-weight: bold;
        }

        table.data-table tr.total-row td {
            border-top: 2px solid #666;
        }

        /* Account Balance Table */
        table.balance-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
            margin-bottom: 15px;
        }

        table.balance-table th {
            background-color: #E0E0E0;
            padding: 8px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #999;
        }

        table.balance-table th.amount-col {
            text-align: right;
            width: 100px;
        }

        table.balance-table td {
            padding: 6px 8px;
            border: 1px solid #999;
        }

        table.balance-table td.amount-col {
            text-align: right;
        }

        table.balance-table tr.highlight-row {
            background-color: #F5F5F5;
            font-weight: bold;
        }

        table.balance-table tr.subtotal-row {
            background-color: #F5F5F5;
            font-weight: bold;
        }

        table.balance-table tr.balance-total {
            background-color: #E8E8E8;
            font-weight: bold;
        }

        table.balance-table tr.final-total {
            background-color: #D0D0D0;
            font-weight: bold;
            border-top: 2px solid #666;
        }

        .indent-1 {
            padding-left: 20px;
        }

        /* Notes */
        .note {
            font-size: 9px;
            font-style: italic;
            margin: 5px 0;
            color: #555;
        }

        .note-label {
            font-weight: bold;
            font-style: italic;
        }

        /* Special styling for descriptions */
        .earning-description {
            font-size: 9px;
            color: #666;
            font-weight: normal;
        }

        @page {
            size: letter;
            margin: 0;
        }

        @media print {
            .page {
                margin: 0;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    
<!-- PAGE 1: Main DTR -->
<div class="page">
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <img src="http://batm-carrot-host.s3-website-us-east-1.amazonaws.com/assets/images/logo.png" alt="Logo">
            </div>
            <div class="company-info">
                <h1>Big Apple Taxi Management LLC</h1>
                <p>50-24 Queens Boulevard, Woodside, NY 11377 4442, 718 779 5000 | bigappletaxinyc.com</p>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Basic Information Grid -->
        <table class="info-grid">
            <tr>
                <td><span class="info-label">Medallion</span></td>
                <td>: {{ medallion }}</td>
                <td><span class="info-label">Receipt number</span></td>
                <td>: {{ receipt_number }}</td>
            </tr>
            <tr>
                <td><span class="info-label">Driver / Leaseholder</span></td>
                <td>: {{ driver_name }}</td>
                <td><span class="info-label">Receipt Date</span></td>
                <td>: {{ receipt_date }}</td>
            </tr>
            <tr>
                <td><span class="info-label">TLC License</span></td>
                <td>: {{ tlc_license }}</td>
                <td><span class="info-label">Receipt Period</span></td>
                <td>: {{ receipt_period }}</td>
            </tr>
        </table>

        <!-- Gross Earnings Snapshot -->
        <h2 class="section-title">Gross Earnings Snapshot for Receipt Period</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Earnings Type</th>
                    <th class="amount-cell">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <strong>CURB</strong><br>
                        <span class="earning-description">Credit Card Transactions</span>
                    </td>
                    <td class="amount-cell">{{ cc_earnings }}</td>
                </tr>
                <tr class="total-row">
                    <td><strong>Total</strong></td>
                    <td class="amount-cell"><strong>{{ net_earnings }}</strong></td>
                </tr>
            </tbody>
        </table>

        <!-- Account Balance for Receipt Period -->
        <h2 class="section-title">Account Balance for Receipt Period</h2>
        <table class="balance-table">
            <tr class="highlight-row">
                <td colspan="3"><strong>Credit Card Earnings</strong></td>
                <td class="amount-col"><strong>{{ cc_earnings }}</strong></td>
            </tr>
            <tr>
                <td colspan="4" style="padding: 0; border: none;">
                    <table style="width: 100%; border-collapse: collapse; margin: 0;">
                        <thead>
                            <tr>
                                <th style="width: 40%; background-color: #E0E0E0; padding: 8px; text-align: left; border: 1px solid #999;">Less</th>
                                <th class="amount-col" style="background-color: #E0E0E0; padding: 8px; text-align: right; border: 1px solid #999;">Charges</th>
                                <th class="amount-col" style="background-color: #E0E0E0; padding: 8px; text-align: right; border: 1px solid #999;">Amount Paid</th>
                                <th class="amount-col" style="background-color: #E0E0E0; padding: 8px; text-align: right; border: 1px solid #999;">Balance</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Lease Amount</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ lease_amount }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ lease_amount }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">MTA, TIF, Congestion, CHRT, & Airport Fees</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ taxes_total }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ mta_tif_fees }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">EZ-Pass Tolls</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ ezpass_tolls }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ ezpass_tolls }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Violation Tickets</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ violation_tickets }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">{{ violation_tickets }}</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">TLC Tickets</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Repairs</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Driver Loans</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Miscellaneous Charges and Adjustments</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                            <tr class="subtotal-row">
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; background-color: #F5F5F5; font-weight: bold; border: 1px solid #999;"><strong>Subtotal</strong></td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; background-color: #F5F5F5; font-weight: bold; border: 1px solid #999;"><strong>{{ subtotal_charges }}</strong></td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; background-color: #F5F5F5; font-weight: bold; border: 1px solid #999;"><strong>{{ subtotal_charges }}</strong></td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; background-color: #F5F5F5; font-weight: bold; border: 1px solid #999;"><strong>–</strong></td>
                            </tr>
                            <tr>
                                <td class="indent-1" style="padding: 6px 8px 6px 28px; border: 1px solid #999;">Prior balance</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                                <td class="amount-col" style="padding: 6px 8px; text-align: right; border: 1px solid #999;">–</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr class="balance-total">
                <td colspan="2"><strong>Net Earnings</strong></td>
                <td class="amount-col"><strong>{{ net_earnings }}</strong></td>
                <td class="amount-col"><strong>{{ net_earnings }}</strong></td>
            </tr>
            <tr class="final-total">
                <td colspan="3"><strong>Total Due to Driver</strong></td>
                <td class="amount-col"><strong>{{ total_due_to_driver }}</strong></td>
            </tr>
        </table>

        <p class="note"><span class="note-label">Note:</span> Includes transactions where the driver is "unknown" – mapped by BATM</p>
        <p class="note"><span class="note-label">Note:</span> Negative Charges (displayed in parentheses) indicate credits or adjustments (e.g., payments received) that reduce the driver's outstanding charges</p>

        <!-- Payment Summary -->
        <h2 class="section-title">Payment Summary</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Payment Type</th>
                    <th>Batch no.</th>
                    <th>Account no.</th>
                    <th class="amount-cell">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ payment_type }}</td>
                    <td>{{ batch_number }}</td>
                    <td>{{ account_number }}</td>
                    <td class="amount-cell">{{ payment_amount }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>